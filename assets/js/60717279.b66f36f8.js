"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[34],{8277:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"commands/custom","title":"custom","description":"Custom CLI Commands","source":"@site/docs/commands/custom.md","sourceDirName":"commands","slug":"/commands/custom","permalink":"/balda-js/docs/commands/custom","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda-js/tree/main/docs/docs/commands/custom.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docs","previous":{"title":"built-ins","permalink":"/balda-js/docs/commands/built-ins"},"next":{"title":"Server","permalink":"/balda-js/docs/core-concepts/server"}}');var l=s(4848),t=s(8453);const r={sidebar_position:3},d=void 0,i={},o=[{value:"Custom CLI Commands",id:"custom-cli-commands",level:3},{value:"1) Create a command class",id:"1-create-a-command-class",level:4},{value:"2) Add flags/args with decorators",id:"2-add-flagsargs-with-decorators",level:4},{value:"3) Make the CLI discover your commands",id:"3-make-the-cli-discover-your-commands",level:4},{value:"Important: Using Decorators",id:"important-using-decorators",level:4},{value:"Flag Types",id:"flag-types",level:4},{value:"String Flags",id:"string-flags",level:5},{value:"Boolean Flags",id:"boolean-flags",level:5},{value:"Number Flags",id:"number-flags",level:5},{value:"List Flags (Multiple Values)",id:"list-flags-multiple-values",level:5},{value:"Flag Options",id:"flag-options",level:4}];function c(e){const n={code:"code",h3:"h3",h4:"h4",h5:"h5",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h3,{id:"custom-cli-commands",children:"Custom CLI Commands"}),"\n",(0,l.jsx)(n.p,{children:"Author your own CLI commands using Balda's command framework."}),"\n",(0,l.jsx)(n.h4,{id:"1-create-a-command-class",children:"1) Create a command class"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",metastring:'title="src/commands/hello.ts"',children:"import { Command } from 'balda-js';\n\nexport default class HelloCommand extends Command {\n  static commandName = 'hello';\n  static description = 'Say hello';\n  static help = [\n    'Example: npx balda hello --name Alice',\n  ];\n\n  static async handle(): Promise<void> {\n    const name = this.commandName || 'world';\n    console.log(`Hello, ${name}!`);\n  }\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-add-flagsargs-with-decorators",children:"2) Add flags/args with decorators"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import { flag, Command } from 'balda-js';\n\nexport default class HelloCommand extends Command {\n  @flag.string({ name: 'name', aliases: 'n', description: 'Your name' })\n  static name: string;\n  // ...\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"3-make-the-cli-discover-your-commands",children:"3) Make the CLI discover your commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",metastring:'title="src/commands/command_registry.ts"',children:"import { commandRegistry } from 'balda-js';\n\n// All the commands must be in the src/commands directory\ncommandRegistry.setCommandsPattern('./src/commands/**/*.ts');\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Run ",(0,l.jsx)(n.code,{children:"npx balda list"})," to verify your command is loaded."]}),"\n",(0,l.jsx)(n.h4,{id:"important-using-decorators",children:"Important: Using Decorators"}),"\n",(0,l.jsxs)(n.p,{children:["When using ",(0,l.jsx)(n.code,{children:"@flag"})," and ",(0,l.jsx)(n.code,{children:"@arg"})," decorators, ",(0,l.jsxs)(n.strong,{children:["do NOT use the ",(0,l.jsx)(n.code,{children:"declare"})," keyword"]})," before your property definitions:"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u274c Incorrect:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"export default class MyCommand extends Command {\n  @flag.string({ name: 'name' })\n  declare static name: string;  // This will result in undefined!\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u2705 Correct:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"export default class MyCommand extends Command {\n  @flag.string({ name: 'name' })\n  static name: string;  // Works correctly\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"declare"}),' keyword tells TypeScript "this property exists but don\'t emit it at runtime", which prevents decorators from setting values properly. Always omit ',(0,l.jsx)(n.code,{children:"declare"})," when using decorators."]}),"\n",(0,l.jsx)(n.h4,{id:"flag-types",children:"Flag Types"}),"\n",(0,l.jsx)(n.p,{children:"Balda supports multiple flag types with full type safety:"}),"\n",(0,l.jsx)(n.h5,{id:"string-flags",children:"String Flags"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import { Command, flag } from 'balda-js';\n\nexport class MyCommand extends Command {\n  @flag.string({\n    name: 'name',\n    aliases: ['n'],\n    description: 'User name',\n    defaultValue: 'guest',\n  })\n  name!: string;\n\n  async execute(): Promise<void> {\n    console.log(`Hello, ${this.name}!`);\n  }\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Usage: ",(0,l.jsx)(n.code,{children:"npx balda mycommand --name=Alice"})," or ",(0,l.jsx)(n.code,{children:"npx balda mycommand -n Alice"})]}),"\n",(0,l.jsx)(n.h5,{id:"boolean-flags",children:"Boolean Flags"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"@flag.boolean({\n  name: 'verbose',\n  aliases: ['v'],\n  description: 'Enable verbose output',\n  defaultValue: false,\n})\nverbose!: boolean;\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Usage: ",(0,l.jsx)(n.code,{children:"npx balda mycommand --verbose"})," or ",(0,l.jsx)(n.code,{children:"npx balda mycommand -v"})]}),"\n",(0,l.jsx)(n.h5,{id:"number-flags",children:"Number Flags"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"@flag.number({\n  name: 'port',\n  aliases: ['p'],\n  description: 'Port number',\n  defaultValue: 3000,\n})\nport!: number;\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Usage: ",(0,l.jsx)(n.code,{children:"npx balda mycommand --port=8080"})," or ",(0,l.jsx)(n.code,{children:"npx balda mycommand -p 8080"})]}),"\n",(0,l.jsx)(n.h5,{id:"list-flags-multiple-values",children:"List Flags (Multiple Values)"}),"\n",(0,l.jsx)(n.p,{children:"List flags can be specified multiple times to collect an array of values:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"@flag.list({\n  name: 'tag',\n  aliases: ['t'],\n  description: 'Add tags (can be specified multiple times)',\n  defaultValue: [],\n})\ntags!: string[];\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Usage: ",(0,l.jsx)(n.code,{children:"npx balda mycommand --tag=frontend --tag=api --tag=v2"})]}),"\n",(0,l.jsxs)(n.p,{children:["Or with aliases: ",(0,l.jsx)(n.code,{children:"npx balda mycommand -t frontend -t api -t v2"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Complete Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import { Command, flag } from 'balda-js';\n\nexport class DeployCommand extends Command {\n  static commandName = 'deploy';\n  static description = 'Deploy application with tags';\n\n  @flag.list({\n    name: 'tag',\n    aliases: ['t'],\n    description: 'Deployment tags',\n    defaultValue: [],\n  })\n  tags!: string[];\n\n  @flag.list({\n    name: 'env',\n    aliases: ['e'],\n    description: 'Environment variables (KEY=VALUE)',\n    parse: (value: string) => {\n      const [key, val] = value.split('=');\n      return `${key}=${val}`;\n    },\n  })\n  envVars?: string[];\n\n  @flag.string({\n    name: 'region',\n    description: 'Deployment region',\n    required: true,\n  })\n  region!: string;\n\n  async execute(): Promise<void> {\n    console.log(`Deploying to ${this.region}`);\n    console.log(`Tags: ${this.tags.join(', ')}`);\n    if (this.envVars) {\n      console.log(`Environment: ${this.envVars.join(', ')}`);\n    }\n  }\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"Usage:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npx balda deploy \\\n  --region=us-east-1 \\\n  --tag=v1.0.0 \\\n  --tag=production \\\n  --tag=hotfix \\\n  -e NODE_ENV=production \\\n  -e DEBUG=false\n"})}),"\n",(0,l.jsx)(n.h4,{id:"flag-options",children:"Flag Options"}),"\n",(0,l.jsx)(n.p,{children:"All flag types support the following options:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Option"}),(0,l.jsx)(n.th,{children:"Type"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"name"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"string"})}),(0,l.jsx)(n.td,{children:"Flag name (defaults to property name)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"aliases"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"string | string[]"})}),(0,l.jsx)(n.td,{children:"Short aliases for the flag"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"description"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"string"})}),(0,l.jsx)(n.td,{children:"Help text description"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"required"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"boolean"})}),(0,l.jsx)(n.td,{children:"Whether the flag is required"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"defaultValue"})}),(0,l.jsx)(n.td,{children:"varies by type"}),(0,l.jsx)(n.td,{children:"Default value if not provided"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"parse"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"(value: any) => T"})}),(0,l.jsx)(n.td,{children:"Custom parser function"})]})]})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Note:"})," For list flags, the ",(0,l.jsx)(n.code,{children:"parse"})," function is called on each individual item, not the entire array."]})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var a=s(6540);const l={},t=a.createContext(l);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);