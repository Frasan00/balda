"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[974],{1716:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"plugins/cookie","title":"Cookie Plugin","description":"The Cookie plugin provides comprehensive cookie parsing and management for your Balda.js application. It automatically parses incoming cookies and provides convenient methods for setting and clearing cookies on responses.","source":"@site/docs/plugins/cookie.md","sourceDirName":"plugins","slug":"/plugins/cookie","permalink":"/balda-js/docs/plugins/cookie","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda-js/tree/main/docs/docs/plugins/cookie.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5}}');var o=s(4848),r=s(8453);const t={sidebar_position:5},a="Cookie Plugin",c={},l=[{value:"Features",id:"features",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Simple Setup",id:"simple-setup",level:3},{value:"Development Configuration",id:"development-configuration",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Basic Options",id:"basic-options",level:3},{value:"Production Configuration",id:"production-configuration",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Basic Cookie Operations",id:"basic-cookie-operations",level:3},{value:"Reading Cookies",id:"reading-cookies",level:3},{value:"Setting Multiple Cookies",id:"setting-multiple-cookies",level:3},{value:"Signed Cookies",id:"signed-cookies",level:3},{value:"Cookie Options",id:"cookie-options",level:2},{value:"Domain Configuration",id:"domain-configuration",level:3},{value:"Path Configuration",id:"path-configuration",level:3},{value:"Expiration Options",id:"expiration-options",level:3},{value:"Security Options",id:"security-options",level:3},{value:"SameSite Configuration",id:"samesite-configuration",level:2},{value:"SameSite Options",id:"samesite-options",level:3},{value:"Environment-Based Configuration",id:"environment-based-configuration",level:2},{value:"Development vs Production",id:"development-vs-production",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Invalid Signed Cookies",id:"invalid-signed-cookies",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"With Authentication",id:"with-authentication",level:3},{value:"With Session Management",id:"with-session-management",level:3}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"cookie-plugin",children:"Cookie Plugin"})}),"\n",(0,o.jsx)(n.p,{children:"The Cookie plugin provides comprehensive cookie parsing and management for your Balda.js application. It automatically parses incoming cookies and provides convenient methods for setting and clearing cookies on responses."}),"\n",(0,o.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Automatic Cookie Parsing"}),": Parses cookies from incoming requests"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Cookie Setting"}),": Easy methods to set cookies on responses"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Cookie Signing"}),": Optional cookie signing for security"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Flexible Configuration"}),": Customizable defaults and options"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Security Features"}),": HttpOnly, Secure, SameSite support"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"simple-setup",children:"Simple Setup"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { Server } from 'balda-js';\n\nconst server = new Server({\n  port: 3000,\n  plugins: {\n    cookie: {\n      secret: 'your-secret-key'\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"development-configuration",children:"Development Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  port: 3000,\n  plugins: {\n    cookie: {\n      secret: 'dev-secret-key',\n      defaults: {\n        httpOnly: true,\n        secure: false,\n        sameSite: 'Lax'\n      }\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,o.jsx)(n.h3,{id:"basic-options",children:"Basic Options"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"cookie: {\n  secret: 'your-secret-key',     // Required for signed cookies\n  parse: true,                   // Enable cookie parsing (default: true)\n  sign: false,                   // Enable cookie signing (default: false)\n  defaults: {\n    path: '/',                   // Cookie path (default: '/')\n    httpOnly: true,              // HttpOnly flag (default: true)\n    secure: false,               // Secure flag (default: false)\n    sameSite: 'Lax'             // SameSite attribute (default: 'Lax')\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"production-configuration",children:"Production Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  port: 3000,\n  plugins: {\n    cookie: {\n      secret: process.env.COOKIE_SECRET,\n      sign: true,\n      defaults: {\n        httpOnly: true,\n        secure: true, // HTTPS only\n        sameSite: 'Strict',\n        domain: '.myapp.com'\n      }\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,o.jsx)(n.h3,{id:"basic-cookie-operations",children:"Basic Cookie Operations"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@controller('/auth')\nexport class AuthController {\n  @post('/login')\n  async login(req: Request, res: Response) {\n    const { username, password } = req.body;\n\n    // Validate credentials\n    const user = await validateUser(username, password);\n\n    if (user) {\n      // Set session cookie\n      res.cookie('sessionId', user.sessionId, {\n        maxAge: 24 * 60 * 60 * 1000, // 24 hours\n        httpOnly: true,\n        secure: true\n      });\n\n      res.json({ message: 'Login successful' });\n    } else {\n      res.unauthorized({ error: 'Invalid credentials' });\n    }\n  }\n\n  @post('/logout')\n  async logout(req: Request, res: Response) {\n    // Clear session cookie\n    res.clearCookie('sessionId');\n    res.json({ message: 'Logout successful' });\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"reading-cookies",children:"Reading Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@controller('/api')\nexport class ApiController {\n  @get('/profile')\n  async getProfile(req: Request, res: Response) {\n    // Access parsed cookies\n    const sessionId = req.cookies.sessionId;\n    const theme = req.cookies.theme || 'light';\n    const language = req.cookies.language || 'en';\n\n    if (!sessionId) {\n      return res.unauthorized({ error: 'No session found' });\n    }\n\n    const user = await getUserBySession(sessionId);\n    res.json({ user, theme, language });\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"setting-multiple-cookies",children:"Setting Multiple Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@post('/preferences')\nasync updatePreferences(req: Request, res: Response) {\n  const { theme, language } = req.body;\n\n  // Set multiple cookies\n  res.cookie('theme', theme, {\n    maxAge: 365 * 24 * 60 * 60 * 1000, // 1 year\n    httpOnly: false // Allow JavaScript access\n  });\n\n  res.cookie('language', language, {\n    maxAge: 365 * 24 * 60 * 60 * 1000,\n    httpOnly: false\n  });\n\n  res.json({ message: 'Preferences updated' });\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"signed-cookies",children:"Signed Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  port: 3000,\n  plugins: {\n    cookie: {\n      secret: 'your-secret-key',\n      sign: true,\n      defaults: {\n        httpOnly: true,\n        secure: true\n      }\n    }\n  }\n});\n\n@controller('/secure')\nexport class SecureController {\n  @post('/set-secure-cookie')\n  async setSecureCookie(req: Request, res: Response) {\n    // Set signed cookie\n    res.cookie('secureData', 'sensitive-information', {\n      signed: true,\n      maxAge: 60 * 60 * 1000 // 1 hour\n    });\n\n    res.json({ message: 'Secure cookie set' });\n  }\n\n  @get('/read-secure-cookie')\n  async readSecureCookie(req: Request, res: Response) {\n    // Read signed cookie\n    const secureData = req.cookies.secureData;\n\n    if (secureData) {\n      res.json({ data: secureData });\n    } else {\n      res.json({ error: 'No secure data found' });\n    }\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"cookie-options",children:"Cookie Options"}),"\n",(0,o.jsx)(n.h3,{id:"domain-configuration",children:"Domain Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Set cookie for specific domain\nres.cookie('sessionId', 'value', {\n  domain: '.myapp.com' // Available on all subdomains\n});\n\n// Set cookie for current domain only\nres.cookie('sessionId', 'value', {\n  domain: 'api.myapp.com' // Only on this subdomain\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"path-configuration",children:"Path Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Set cookie for specific path\nres.cookie('adminToken', 'value', {\n  path: '/admin' // Only available on /admin routes\n});\n\n// Set cookie for entire site\nres.cookie('sessionId', 'value', {\n  path: '/' // Available everywhere\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"expiration-options",children:"Expiration Options"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Expire at specific date\nres.cookie('sessionId', 'value', {\n  expires: new Date('2024-12-31')\n});\n\n// Expire after specific time\nres.cookie('sessionId', 'value', {\n  maxAge: 24 * 60 * 60 * 1000 // 24 hours\n});\n\n// Session cookie (expires when browser closes)\nres.cookie('sessionId', 'value', {\n  // No expires or maxAge\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"security-options",children:"Security Options"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Secure cookie (HTTPS only)\nres.cookie('sessionId', 'value', {\n  secure: true,\n  httpOnly: true,\n  sameSite: 'Strict'\n});\n\n// Cross-site cookie\nres.cookie('trackingId', 'value', {\n  secure: true,\n  sameSite: 'None' // Requires secure: true\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"samesite-configuration",children:"SameSite Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"samesite-options",children:"SameSite Options"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Strict - only same site\nres.cookie('sessionId', 'value', {\n  sameSite: 'Strict'\n});\n\n// Lax - same site + top-level navigation\nres.cookie('sessionId', 'value', {\n  sameSite: 'Lax'\n});\n\n// None - cross-site (requires secure: true)\nres.cookie('trackingId', 'value', {\n  sameSite: 'None',\n  secure: true\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"environment-based-configuration",children:"Environment-Based Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"development-vs-production",children:"Development vs Production"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const isProduction = process.env.NODE_ENV === 'production';\n\nconst server = new Server({\n  port: 3000,\n  plugins: {\n    cookie: {\n      secret: process.env.COOKIE_SECRET,\n      sign: isProduction,\n      defaults: {\n        httpOnly: true,\n        secure: isProduction, // HTTPS only in production\n        sameSite: isProduction ? 'Strict' : 'Lax',\n        domain: isProduction ? '.myapp.com' : undefined\n      }\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,o.jsx)(n.h3,{id:"invalid-signed-cookies",children:"Invalid Signed Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@get('/verify-cookie')\nasync verifyCookie(req: Request, res: Response) {\n  const signedCookie = req.cookies.secureData;\n\n  if (!signedCookie) {\n    return res.unauthorized({ error: 'No signed cookie found' });\n  }\n\n  // The cookie plugin automatically verifies signed cookies\n  // If verification fails, the cookie won't be available\n  res.json({ verified: true, data: signedCookie });\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,o.jsx)(n.h3,{id:"with-authentication",children:"With Authentication"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@controller('/auth')\nexport class AuthController {\n  @post('/login')\n  async login(req: Request, res: Response) {\n    const { username, password } = req.body;\n\n    const user = await authenticateUser(username, password);\n\n    if (user) {\n      // Set authentication cookies\n      res.cookie('authToken', user.token, {\n        httpOnly: true,\n        secure: true,\n        sameSite: 'Strict',\n        maxAge: 24 * 60 * 60 * 1000\n      });\n\n      res.cookie('userId', user.id.toString(), {\n        httpOnly: true,\n        secure: true,\n        sameSite: 'Strict',\n        maxAge: 24 * 60 * 60 * 1000\n      });\n\n      res.json({ message: 'Login successful' });\n    } else {\n      res.unauthorized({ error: 'Invalid credentials' });\n    }\n  }\n\n  @post('/logout')\n  async logout(req: Request, res: Response) {\n    // Clear all authentication cookies\n    res.clearCookie('authToken');\n    res.clearCookie('userId');\n\n    res.json({ message: 'Logout successful' });\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"with-session-management",children:"With Session Management"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@controller('/session')\nexport class SessionController {\n  @post('/create')\n  async createSession(req: Request, res: Response) {\n    const sessionId = generateSessionId();\n\n    res.cookie('sessionId', sessionId, {\n      httpOnly: true,\n      secure: true,\n      sameSite: 'Strict',\n      maxAge: 30 * 24 * 60 * 60 * 1000 // 30 days\n    });\n\n    await createSession(sessionId, req.body);\n    res.json({ sessionId });\n  }\n\n  @get('/data')\n  async getSessionData(req: Request, res: Response) {\n    const sessionId = req.cookies.sessionId;\n\n    if (!sessionId) {\n      return res.unauthorized({ error: 'No session found' });\n    }\n\n    const sessionData = await getSession(sessionId);\n    res.json(sessionData);\n  }\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const o={},r=i.createContext(o);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);