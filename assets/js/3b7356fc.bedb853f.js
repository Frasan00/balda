"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6974],{1716:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"plugins/cookie","title":"Cookie Plugin","description":"Provides comprehensive cookie parsing and management. Automatically parses incoming cookies and provides convenient methods for setting and clearing cookies on responses.","source":"@site/docs/plugins/cookie.md","sourceDirName":"plugins","slug":"/plugins/cookie","permalink":"/balda-js/docs/plugins/cookie","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda-js/tree/main/docs/docs/plugins/cookie.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docs","previous":{"title":"Static Plugin","permalink":"/balda-js/docs/plugins/static"},"next":{"title":"Log Plugin","permalink":"/balda-js/docs/plugins/log"}}');var o=s(4848),r=s(8453);const t={sidebar_position:5},a="Cookie Plugin",c={},l=[{value:"Quick Start",id:"quick-start",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Production Configuration",id:"production-configuration",level:3},{value:"Usage",id:"usage",level:2},{value:"Setting Cookies",id:"setting-cookies",level:3},{value:"Reading Cookies",id:"reading-cookies",level:3},{value:"Setting Multiple Cookies",id:"setting-multiple-cookies",level:3},{value:"Cookie Options",id:"cookie-options",level:2},{value:"maxAge",id:"maxage",level:3},{value:"httpOnly",id:"httponly",level:3},{value:"secure",id:"secure",level:3},{value:"sameSite",id:"samesite",level:3},{value:"domain",id:"domain",level:3},{value:"path",id:"path",level:3},{value:"Signed Cookies",id:"signed-cookies",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Session Cookies",id:"session-cookies",level:3},{value:"Authentication Tokens",id:"authentication-tokens",level:3},{value:"User Preferences",id:"user-preferences",level:3},{value:"Environment-Based Configuration",id:"environment-based-configuration",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Session Management",id:"session-management",level:3},{value:"Remember Me",id:"remember-me",level:3},{value:"Analytics Tracking",id:"analytics-tracking",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"cookie-plugin",children:"Cookie Plugin"})}),"\n",(0,o.jsx)(n.p,{children:"Provides comprehensive cookie parsing and management. Automatically parses incoming cookies and provides convenient methods for setting and clearing cookies on responses."}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { Server } from 'balda-js';\n\nconst server = new Server({\n  plugins: {\n    cookie: {\n      secret: 'your-secret-key'\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"cookie: {\n  secret: 'your-secret-key',     // Required for signed cookies\n  parse: true,                   // Enable cookie parsing (default: true)\n  sign: false,                   // Enable cookie signing (default: false)\n  defaults: {\n    path: '/',                   // Cookie path (default: '/')\n    httpOnly: true,              // HttpOnly flag (default: true)\n    secure: false,               // Secure flag (default: false)\n    sameSite: 'Lax'             // SameSite attribute (default: 'Lax')\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"production-configuration",children:"Production Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"cookie: {\n  secret: process.env.COOKIE_SECRET,\n  sign: true,\n  defaults: {\n    httpOnly: true,\n    secure: true,            // HTTPS only\n    sameSite: 'Strict',\n    domain: '.myapp.com'\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.h3,{id:"setting-cookies",children:"Setting Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@controller('/auth')\nexport class AuthController {\n  @post('/login')\n  async login(req: Request, res: Response) {\n    const user = await validateUser(req.body.username, req.body.password);\n\n    if (user) {\n      // Set cookie\n      res.cookie('sessionId', user.sessionId, {\n        maxAge: 24 * 60 * 60 * 1000, // 24 hours\n        httpOnly: true,\n        secure: true\n      });\n\n      res.json({ message: 'Login successful' });\n    }\n  }\n\n  @post('/logout')\n  async logout(req: Request, res: Response) {\n    // Clear cookie\n    res.clearCookie('sessionId');\n    res.json({ message: 'Logout successful' });\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"reading-cookies",children:"Reading Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@get('/profile')\nasync getProfile(req: Request, res: Response) {\n  const sessionId = req.cookies.sessionId;\n  const theme = req.cookies.theme || 'light';\n\n  if (!sessionId) {\n    return res.unauthorized({ error: 'No session found' });\n  }\n\n  const user = await getUserBySession(sessionId);\n  res.json({ user, theme });\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"setting-multiple-cookies",children:"Setting Multiple Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"@post('/preferences')\nasync setPreferences(req: Request, res: Response) {\n  const { theme, language, timezone } = req.body;\n\n  res\n    .cookie('theme', theme, { maxAge: 365 * 24 * 60 * 60 * 1000 })\n    .cookie('language', language, { maxAge: 365 * 24 * 60 * 60 * 1000 })\n    .cookie('timezone', timezone, { maxAge: 365 * 24 * 60 * 60 * 1000 })\n    .json({ message: 'Preferences updated' });\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"cookie-options",children:"Cookie Options"}),"\n",(0,o.jsx)(n.h3,{id:"maxage",children:"maxAge"}),"\n",(0,o.jsx)(n.p,{children:"Cookie expiration in milliseconds:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('name', 'value', {\n  maxAge: 24 * 60 * 60 * 1000  // 24 hours\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"httponly",children:"httpOnly"}),"\n",(0,o.jsx)(n.p,{children:"Prevent JavaScript access (recommended for security):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('sessionId', value, {\n  httpOnly: true  // Cannot be accessed via JavaScript\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"secure",children:"secure"}),"\n",(0,o.jsx)(n.p,{children:"Only send over HTTPS:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('sessionId', value, {\n  secure: true  // HTTPS only\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"samesite",children:"sameSite"}),"\n",(0,o.jsx)(n.p,{children:"CSRF protection:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('name', value, {\n  sameSite: 'Strict'  // or 'Lax' or 'None'\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"domain",children:"domain"}),"\n",(0,o.jsx)(n.p,{children:"Cookie domain:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('name', value, {\n  domain: '.myapp.com'  // Works for all subdomains\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"path",children:"path"}),"\n",(0,o.jsx)(n.p,{children:"Cookie path:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('name', value, {\n  path: '/api'  // Only sent to /api routes\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"signed-cookies",children:"Signed Cookies"}),"\n",(0,o.jsx)(n.p,{children:"Enable signing for tamper-proof cookies:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Configuration\ncookie: {\n  secret: 'your-secret-key',\n  sign: true\n}\n\n// Set signed cookie\nres.cookie('userId', user.id, {\n  signed: true,\n  httpOnly: true\n});\n\n// Read signed cookie\nconst userId = req.signedCookies.userId;\n"})}),"\n",(0,o.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,o.jsx)(n.h3,{id:"session-cookies",children:"Session Cookies"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('sessionId', sessionId, {\n  httpOnly: true,        // Prevent XSS\n  secure: true,          // HTTPS only\n  sameSite: 'Strict',   // Prevent CSRF\n  maxAge: 24 * 60 * 60 * 1000\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"authentication-tokens",children:"Authentication Tokens"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('authToken', token, {\n  httpOnly: true,\n  secure: true,\n  sameSite: 'Strict',\n  signed: true          // Prevent tampering\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"user-preferences",children:"User Preferences"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('theme', 'dark', {\n  httpOnly: false,       // Allow JavaScript access\n  secure: true,\n  sameSite: 'Lax',\n  maxAge: 365 * 24 * 60 * 60 * 1000  // 1 year\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"environment-based-configuration",children:"Environment-Based Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const isProduction = process.env.NODE_ENV === 'production';\n\nconst server = new Server({\n  plugins: {\n    cookie: {\n      secret: process.env.COOKIE_SECRET,\n      sign: isProduction,\n      defaults: {\n        httpOnly: true,\n        secure: isProduction,\n        sameSite: isProduction ? 'Strict' : 'Lax'\n      }\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,o.jsx)(n.h3,{id:"session-management",children:"Session Management"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"cookie: {\n  secret: process.env.SESSION_SECRET,\n  sign: true,\n  defaults: {\n    httpOnly: true,\n    secure: true,\n    sameSite: 'Strict',\n    maxAge: 24 * 60 * 60 * 1000\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"remember-me",children:"Remember Me"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('rememberMe', token, {\n  httpOnly: true,\n  secure: true,\n  sameSite: 'Strict',\n  maxAge: 30 * 24 * 60 * 60 * 1000  // 30 days\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"analytics-tracking",children:"Analytics Tracking"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"res.cookie('tracking', trackingId, {\n  httpOnly: false,\n  secure: true,\n  sameSite: 'Lax',\n  maxAge: 365 * 24 * 60 * 60 * 1000\n});\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const o={},r=i.createContext(o);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);