"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3550],{2371:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>g,frontMatter:()=>l,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"core-concepts/logger","title":"Logger","description":"Balda provides built-in structured logging powered by Pino - a fast, low-overhead logger for Node.js, Bun, and Deno.","source":"@site/docs/core-concepts/logger.md","sourceDirName":"core-concepts","slug":"/core-concepts/logger","permalink":"/balda/docs/core-concepts/logger","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda/tree/main/docs/docs/core-concepts/logger.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docs","previous":{"title":"Hashing","permalink":"/balda/docs/core-concepts/hashing"},"next":{"title":"Policies","permalink":"/balda/docs/core-concepts/policies"}}');var s=n(4848),i=n(8453);const l={sidebar_position:7},t="Logger",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Custom Logger for the Server",id:"custom-logger-for-the-server",level:2},{value:"Pretty-Printed Logs (Development)",id:"pretty-printed-logs-development",level:3},{value:"JSON Logs (Production)",id:"json-logs-production",level:3},{value:"Environment-Based Configuration",id:"environment-based-configuration",level:3},{value:"Scoped Loggers",id:"scoped-loggers",level:2},{value:"Scoped Logger Pattern in Classes",id:"scoped-logger-pattern-in-classes",level:3},{value:"CLI Logger Resolution",id:"cli-logger-resolution",level:2},{value:"Default Behavior (zero config)",id:"default-behavior-zero-config",level:3},{value:"Custom Logger Path",id:"custom-logger-path",level:3},{value:"Programmatic Override",id:"programmatic-override",level:3},{value:"Log Levels",id:"log-levels",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"<code>Server({ logger })</code>",id:"server-logger-",level:3},{value:"<code>CommandRegistry.setLogger(logger)</code>",id:"commandregistrysetloggerlogger",level:3},{value:"<code>CommandRegistry.loggerPath</code>",id:"commandregistryloggerpath",level:3},{value:"<code>logger</code>",id:"logger-1",level:3},{value:"Learn More",id:"learn-more",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"logger",children:"Logger"})}),"\n",(0,s.jsxs)(r.p,{children:["Balda provides built-in structured logging powered by ",(0,s.jsx)(r.a,{href:"https://getpino.io/",children:"Pino"})," - a fast, low-overhead logger for Node.js, Bun, and Deno."]}),"\n",(0,s.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Library:"})," Pino ^10.1.0"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Default level:"})," ",(0,s.jsx)(r.code,{children:"info"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Format:"})," JSON (structured logs)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Runtimes:"})," Node.js, Bun, Deno"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { logger } from 'balda';\n\nlogger.info('Server starting');\nlogger.error('Something went wrong', { error: err });\nlogger.warn('High memory usage');\nlogger.debug('Debug information', { context: data });\n"})}),"\n",(0,s.jsx)(r.h2,{id:"custom-logger-for-the-server",children:"Custom Logger for the Server"}),"\n",(0,s.jsxs)(r.p,{children:["Pass your own Pino logger instance directly to the ",(0,s.jsx)(r.code,{children:"Server"})," constructor \u2014 just like you can with ",(0,s.jsx)(r.code,{children:"ajvInstance"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import pino from 'pino';\nimport { Server } from 'balda';\n\nconst logger = pino({ level: 'debug' });\n\nconst server = new Server({\n  port: 3000,\n  logger,\n});\n"})}),"\n",(0,s.jsxs)(r.p,{children:["If no ",(0,s.jsx)(r.code,{children:"logger"})," is provided, the server uses the default internal logger (",(0,s.jsx)(r.code,{children:"info"})," level, JSON output)."]}),"\n",(0,s.jsx)(r.h3,{id:"pretty-printed-logs-development",children:"Pretty-Printed Logs (Development)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import pino from 'pino';\nimport { Server } from 'balda';\n\nconst logger = pino({\n  level: 'debug',\n  transport: {\n    target: 'pino-pretty',\n    options: {\n      colorize: true,\n      translateTime: 'HH:MM:ss Z',\n      ignore: 'pid,hostname',\n    },\n  },\n});\n\nconst server = new Server({ port: 3000, logger });\n"})}),"\n",(0,s.jsx)(r.h3,{id:"json-logs-production",children:"JSON Logs (Production)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import pino from 'pino';\nimport { Server } from 'balda';\n\nconst logger = pino({\n  level: 'warn',\n  formatters: {\n    level: (label) => ({ level: label }),\n  },\n  timestamp: pino.stdTimeFunctions.isoTime,\n});\n\nconst server = new Server({ port: 3000, logger });\n"})}),"\n",(0,s.jsx)(r.h3,{id:"environment-based-configuration",children:"Environment-Based Configuration"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import pino from 'pino';\nimport { Server } from 'balda';\n\nconst logger = pino({\n  level: process.env.LOG_LEVEL || 'info',\n  ...(process.env.NODE_ENV === 'development' && {\n    transport: {\n      target: 'pino-pretty',\n      options: { colorize: true },\n    },\n  }),\n});\n\nconst server = new Server({ port: 3000, logger });\n"})}),"\n",(0,s.jsx)(r.h2,{id:"scoped-loggers",children:"Scoped Loggers"}),"\n",(0,s.jsxs)(r.p,{children:["Create child loggers with additional context using ",(0,s.jsx)(r.code,{children:"logger.child()"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'import { logger } from \'balda\';\n\nconst serviceLogger = logger.child({ scope: \'UserService\' });\nserviceLogger.info(\'User created\', { userId: \'123\' });\n\n// Output: {"level":"info","time":...,"scope":"UserService","userId":"123","msg":"User created"}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"scoped-logger-pattern-in-classes",children:"Scoped Logger Pattern in Classes"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { logger } from 'balda';\n\nexport class UserService {\n  private readonly log = logger.child({ scope: 'UserService' });\n\n  async createUser(email: string) {\n    this.log.info('Creating user', { email });\n    // ...\n  }\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"cli-logger-resolution",children:"CLI Logger Resolution"}),"\n",(0,s.jsxs)(r.p,{children:["Commands run standalone via ",(0,s.jsx)(r.code,{children:"npx balda <command>"})," \u2014 there is no user-controlled entrypoint. To use a custom logger for CLI commands, Balda resolves the logger automatically from a file path:"]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"CommandRegistry.loggerPath"})," defaults to ",(0,s.jsx)(r.code,{children:'"src/logger.ts"'})," (configurable, like ",(0,s.jsx)(r.code,{children:"commandsPattern"}),")"]}),"\n",(0,s.jsxs)(r.li,{children:["Before executing a command, the CLI dynamically imports the file and looks for a ",(0,s.jsxs)(r.strong,{children:["named ",(0,s.jsx)(r.code,{children:"logger"})," export"]})," (a pino instance)"]}),"\n",(0,s.jsxs)(r.li,{children:["If found, it calls ",(0,s.jsx)(r.code,{children:"CommandRegistry.setLogger()"})," internally \u2014 all commands use that logger"]}),"\n",(0,s.jsxs)(r.li,{children:["Per-command override is possible via ",(0,s.jsx)(r.code,{children:"CommandOptions.loggerPath"})]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["Since the scaffolded ",(0,s.jsx)(r.code,{children:"src/logger.ts"})," exports a pino instance that is also imported by ",(0,s.jsx)(r.code,{children:"server.ts"}),", ",(0,s.jsx)(r.strong,{children:"both the server and CLI commands share the same logger definition"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"default-behavior-zero-config",children:"Default Behavior (zero config)"}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"init"})," command scaffolds ",(0,s.jsx)(r.code,{children:"src/logger.ts"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"// src/logger.ts\nimport pino from 'pino';\n\nexport const logger = pino({ level: 'info' });\n"})}),"\n",(0,s.jsxs)(r.p,{children:["And ",(0,s.jsx)(r.code,{children:"src/server.ts"})," imports it:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { Server } from 'balda';\nimport { logger } from './logger.js';\n\nconst server = new Server({\n  port: 80,\n  logger,\n});\n"})}),"\n",(0,s.jsxs)(r.p,{children:["CLI commands automatically pick up the same logger from ",(0,s.jsx)(r.code,{children:"src/logger.ts"})," \u2014 no extra configuration needed."]}),"\n",(0,s.jsx)(r.h3,{id:"custom-logger-path",children:"Custom Logger Path"}),"\n",(0,s.jsx)(r.p,{children:"To change the global logger path for all commands:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { CommandRegistry } from 'balda';\n\nCommandRegistry.loggerPath = 'src/custom-logger.ts';\n"})}),"\n",(0,s.jsx)(r.p,{children:"Or override per-command:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { Command, CommandOptions } from 'balda';\n\nexport default class MyCommand extends Command {\n  static commandName = 'mycommand';\n  static options: CommandOptions = {\n    loggerPath: 'src/custom-logger.ts',\n  };\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"programmatic-override",children:"Programmatic Override"}),"\n",(0,s.jsxs)(r.p,{children:["You can also call ",(0,s.jsx)(r.code,{children:"CommandRegistry.setLogger()"})," directly with a pino instance:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import pino from 'pino';\nimport { CommandRegistry } from 'balda';\n\nCommandRegistry.setLogger(pino({ level: 'debug' }));\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This overrides the logger for ",(0,s.jsx)(r.code,{children:"CommandRegistry"})," and all ",(0,s.jsx)(r.code,{children:"Command"})," subclasses."]}),"\n",(0,s.jsx)(r.h2,{id:"log-levels",children:"Log Levels"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Level"}),(0,s.jsx)(r.th,{children:"Numeric Value"}),(0,s.jsx)(r.th,{children:"Use Case"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"trace"})}),(0,s.jsx)(r.td,{children:"10"}),(0,s.jsx)(r.td,{children:"Very detailed debugging (not recommended in production)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"debug"})}),(0,s.jsx)(r.td,{children:"20"}),(0,s.jsx)(r.td,{children:"Debugging information"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"info"})}),(0,s.jsx)(r.td,{children:"30"}),(0,s.jsx)(r.td,{children:"General informational messages"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"warn"})}),(0,s.jsx)(r.td,{children:"30"}),(0,s.jsx)(r.td,{children:"Warning messages"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"error"})}),(0,s.jsx)(r.td,{children:"40"}),(0,s.jsx)(r.td,{children:"Error messages"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"fatal"})}),(0,s.jsx)(r.td,{children:"60"}),(0,s.jsx)(r.td,{children:"Critical errors that require immediate attention"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"silent"})}),(0,s.jsx)(r.td,{children:"Infinity"}),(0,s.jsx)(r.td,{children:"Disable logging"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(r.h3,{id:"server-logger-",children:(0,s.jsx)(r.code,{children:"Server({ logger })"})}),"\n",(0,s.jsx)(r.p,{children:"Pass a Pino logger instance to the server constructor."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import pino from 'pino';\nimport { Server } from 'balda';\n\nconst server = new Server({\n  logger: pino({ level: 'debug' }),\n});\n"})}),"\n",(0,s.jsx)(r.p,{children:"If omitted, the default internal logger is used."}),"\n",(0,s.jsx)(r.h3,{id:"commandregistrysetloggerlogger",children:(0,s.jsx)(r.code,{children:"CommandRegistry.setLogger(logger)"})}),"\n",(0,s.jsx)(r.p,{children:"Override the default logger for all CLI commands programmatically."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import pino from 'pino';\nimport { CommandRegistry } from 'balda';\n\nCommandRegistry.setLogger(pino({ level: 'debug' }));\n"})}),"\n",(0,s.jsx)(r.h3,{id:"commandregistryloggerpath",children:(0,s.jsx)(r.code,{children:"CommandRegistry.loggerPath"})}),"\n",(0,s.jsxs)(r.p,{children:["Path to a file exporting a pino ",(0,s.jsx)(r.code,{children:"logger"})," instance, resolved automatically by the CLI before command execution. Defaults to ",(0,s.jsx)(r.code,{children:'"src/logger.ts"'}),"."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { CommandRegistry } from 'balda';\n\nCommandRegistry.loggerPath = 'src/custom-logger.ts';\n"})}),"\n",(0,s.jsx)(r.h3,{id:"logger-1",children:(0,s.jsx)(r.code,{children:"logger"})}),"\n",(0,s.jsx)(r.p,{children:"The default logger instance exported by Balda."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { logger } from 'balda';\n\nlogger.info(message, ...args);\nlogger.error(message, ...args);\nlogger.warn(message, ...args);\nlogger.debug(message, ...args);\n"})}),"\n",(0,s.jsx)(r.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://getpino.io/",children:"Pino Documentation"})," - Full Pino API reference"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/pinojs/pino-pretty",children:"pino-pretty"})," - Pretty printing options"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"../getting-started/configuration",children:"Server Configuration"})," - Server-level configuration"]}),"\n"]})]})}function g(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>t});var o=n(6540);const s={},i=o.createContext(s);function l(e){const r=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(i.Provider,{value:r},e.children)}}}]);