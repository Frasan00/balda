"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[603],{1210:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"core-concepts/controllers","title":"Controllers","description":"Controllers are the heart of your Balda.js application. They organize your route handlers into logical groups and provide a clean, decorator-based API for defining HTTP endpoints.","source":"@site/docs/core-concepts/controllers.md","sourceDirName":"core-concepts","slug":"/core-concepts/controllers","permalink":"/balda-js/docs/core-concepts/controllers","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda-js/tree/main/docs/docs/core-concepts/controllers.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docs","previous":{"title":"Server","permalink":"/balda-js/docs/core-concepts/server"},"next":{"title":"Routing","permalink":"/balda-js/docs/core-concepts/routing"}}');var o=n(4848),t=n(8453);const l={sidebar_position:2},a="Controllers",i={},d=[{value:"Basic Controller",id:"basic-controller",level:2},{value:"Controller Decorator",id:"controller-decorator",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Examples",id:"examples",level:3},{value:"HTTP Method Decorators",id:"http-method-decorators",level:2},{value:"GET Requests",id:"get-requests",level:3},{value:"POST Requests",id:"post-requests",level:3},{value:"PUT Requests",id:"put-requests",level:3},{value:"PATCH Requests",id:"patch-requests",level:3},{value:"DELETE Requests",id:"delete-requests",level:3},{value:"Route Options",id:"route-options",level:2},{value:"Controller-Level Middleware",id:"controller-level-middleware",level:2},{value:"Complete Controller Example",id:"complete-controller-example",level:2},{value:"Controller Organization",id:"controller-organization",level:2},{value:"File Structure",id:"file-structure",level:3},{value:"Controller Registration",id:"controller-registration",level:3},{value:"Controller Index",id:"controller-index",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Single Responsibility",id:"1-single-responsibility",level:3},{value:"2. Consistent Naming",id:"2-consistent-naming",level:3},{value:"3. Error Handling",id:"3-error-handling",level:3},{value:"4. Validation and Serialization",id:"4-validation-and-serialization",level:3},{value:"5. Middleware Organization",id:"5-middleware-organization",level:3}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"controllers",children:"Controllers"})}),"\n",(0,o.jsx)(r.p,{children:"Controllers are the heart of your Balda.js application. They organize your route handlers into logical groups and provide a clean, decorator-based API for defining HTTP endpoints."}),"\n",(0,o.jsx)(r.h2,{id:"basic-controller",children:"Basic Controller"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"import { controller, get, post } from 'balda-js';\nimport { Request, Response } from 'balda-js';\n\n@controller('/users')\nexport class UsersController {\n  @get('/')\n  async getAllUsers(req: Request, res: Response) {\n    res.json({ users: [] });\n  }\n\n  @post('/')\n  async createUser(req: Request, res: Response) {\n    res.created(req.body);\n  }\n}\n"})}),"\n",(0,o.jsx)(r.h2,{id:"controller-decorator",children:"Controller Decorator"}),"\n",(0,o.jsxs)(r.p,{children:["The ",(0,o.jsx)(r.code,{children:"@controller()"})," decorator marks a class as a controller and defines the base path for all routes within that controller."]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@controller(path?: string, swaggerOptions?: SwaggerRouteOptions)\n"})}),"\n",(0,o.jsx)(r.h3,{id:"parameters",children:"Parameters"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"path"})," (optional): Base path for all routes in the controller"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"swaggerOptions"})," (optional): Swagger documentation options for the controller"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"// Simple controller\n@controller('/users')\nexport class UsersController {}\n\n// Controller with Swagger options\n@controller('/users', {\n  tags: ['Users'],\n  summary: 'User management endpoints'\n})\nexport class UsersController {}\n"})}),"\n",(0,o.jsx)(r.h2,{id:"http-method-decorators",children:"HTTP Method Decorators"}),"\n",(0,o.jsx)(r.p,{children:"Balda.js provides decorators for all HTTP methods:"}),"\n",(0,o.jsx)(r.h3,{id:"get-requests",children:"GET Requests"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@get('/')\nasync getAllUsers(req: Request, res: Response) {\n  res.json({ users: [] });\n}\n\n@get('/:id')\nasync getUserById(req: Request, res: Response) {\n  const id = req.params.id;\n  res.json({ user: { id } });\n}\n"})}),"\n",(0,o.jsx)(r.h3,{id:"post-requests",children:"POST Requests"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@post('/')\nasync createUser(req: Request, res: Response) {\n  const user = req.body;\n  res.created(user);\n}\n"})}),"\n",(0,o.jsx)(r.h3,{id:"put-requests",children:"PUT Requests"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@put('/:id')\nasync updateUser(req: Request, res: Response) {\n  const id = req.params.id;\n  const updates = req.body;\n  res.json({ id, ...updates });\n}\n"})}),"\n",(0,o.jsx)(r.h3,{id:"patch-requests",children:"PATCH Requests"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@patch('/:id')\nasync partialUpdateUser(req: Request, res: Response) {\n  const id = req.params.id;\n  const updates = req.body;\n  res.json({ id, ...updates });\n}\n"})}),"\n",(0,o.jsx)(r.h3,{id:"delete-requests",children:"DELETE Requests"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@del('/:id')\nasync deleteUser(req: Request, res: Response) {\n  const id = req.params.id;\n  res.noContent();\n}\n"})}),"\n",(0,o.jsx)(r.h2,{id:"route-options",children:"Route Options"}),"\n",(0,o.jsx)(r.p,{children:"Each HTTP method decorator can accept route options:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@get('/', {\n  middleware: [authMiddleware],\n  swagger: {\n    summary: 'Get all users',\n    description: 'Retrieve a list of all users'\n  }\n})\nasync getAllUsers(req: Request, res: Response) {\n  res.json({ users: [] });\n}\n"})}),"\n",(0,o.jsx)(r.h2,{id:"controller-level-middleware",children:"Controller-Level Middleware"}),"\n",(0,o.jsx)(r.p,{children:"You can apply middleware to all routes in a controller:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@controller('/users')\n@middleware(authMiddleware)\nexport class UsersController {\n  @get('/')\n  async getAllUsers(req: Request, res: Response) {\n    // This route will use authMiddleware\n    res.json({ users: [] });\n  }\n\n  @get('/public')\n  @middleware(publicMiddleware) // Override controller middleware\n  async getPublicUsers(req: Request, res: Response) {\n    // This route will use publicMiddleware instead\n    res.json({ users: [] });\n  }\n}\n"})}),"\n",(0,o.jsx)(r.h2,{id:"complete-controller-example",children:"Complete Controller Example"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"import {\n  controller,\n  get,\n  post,\n  put,\n  del,\n  middleware,\n  validate,\n  serialize\n} from 'balda-js';\nimport { Request, Response } from 'balda-js';\nimport z from 'zod';\n\nconst UserSchema = z.object({\n  id: z.number(),\n  name: z.string(),\n  email: z.string()\n});\n\nconst CreateUserSchema = z.object({\n  name: z.string(),\n  email: z.string().email()\n});\n\n@controller('/users', {\n  tags: ['Users'],\n  summary: 'User management endpoints'\n})\n@middleware(loggerMiddleware)\nexport class UsersController {\n  private users = [\n    { id: 1, name: 'John Doe', email: 'john@example.com' },\n    { id: 2, name: 'Jane Smith', email: 'jane@example.com' }\n  ];\n\n  @get('/')\n  @serialize(z.array(UserSchema))\n  async getAllUsers(req: Request, res: Response) {\n    res.json(this.users);\n  }\n\n  @get('/:id')\n  @serialize(UserSchema)\n  async getUserById(req: Request, res: Response) {\n    const id = parseInt(req.params.id);\n    const user = this.users.find(u => u.id === id);\n\n    if (!user) {\n      return res.notFound({ error: 'User not found' });\n    }\n\n    res.json(user);\n  }\n\n  @post('/')\n  @validate.body(CreateUserSchema)\n  @serialize(UserSchema)\n    async createUser(req: Request, res: Response, body: z.infer<typeof CreateUserSchema>) {\n    const newUser = {\n      id: this.users.length + 1,\n      ...body\n    };\n\n    this.users.push(newUser);\n    res.created(newUser);\n  }\n\n  @put('/:id')\n  @middleware(authMiddleware)\n  @validate.body(CreateUserSchema)\n  @serialize(UserSchema)\n  async updateUser(req: Request, res: Response, body: z.infer<typeof CreateUserSchema>) {\n    const id = parseInt(req.params.id);\n    const userIndex = this.users.findIndex(u => u.id === id);\n\n    if (userIndex === -1) {\n      return res.notFound({ error: 'User not found' });\n    }\n\n    this.users[userIndex] = { ...this.users[userIndex], ...body };\n    res.json(this.users[userIndex]);\n  }\n\n  @del('/:id')\n  @middleware(authMiddleware)\n  async deleteUser(req: Request, res: Response) {\n    const id = parseInt(req.params.id);\n    const userIndex = this.users.findIndex(u => u.id === id);\n\n    if (userIndex === -1) {\n      return res.notFound({ error: 'User not found' });\n    }\n\n    this.users.splice(userIndex, 1);\n    res.noContent();\n  }\n}\n"})}),"\n",(0,o.jsx)(r.h2,{id:"controller-organization",children:"Controller Organization"}),"\n",(0,o.jsx)(r.h3,{id:"file-structure",children:"File Structure"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"src/\n\u251c\u2500\u2500 controllers/\n\u2502   \u251c\u2500\u2500 users.controller.ts\n\u2502   \u251c\u2500\u2500 posts.controller.ts\n\u2502   \u251c\u2500\u2500 auth.controller.ts\n\u2502   \u2514\u2500\u2500 index.ts\n"})}),"\n",(0,o.jsx)(r.h3,{id:"controller-registration",children:"Controller Registration"}),"\n",(0,o.jsx)(r.p,{children:"Controllers are automatically registered when the server starts. Make sure your controller files match the patterns specified in your server configuration:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"const server = new Server({\n  controllerPatterns: ['./src/controllers/**/*.ts']\n});\n"})}),"\n",(0,o.jsx)(r.h3,{id:"controller-index",children:"Controller Index"}),"\n",(0,o.jsx)(r.p,{children:"You can create an index file to export all controllers:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"// src/controllers/index.ts\nexport * from './users.controller';\nexport * from './posts.controller';\nexport * from './auth.controller';\n"})}),"\n",(0,o.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsx)(r.h3,{id:"1-single-responsibility",children:"1. Single Responsibility"}),"\n",(0,o.jsx)(r.p,{children:"Each controller should handle a single resource or feature:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"// Good: Focused on users\n@controller('/users')\nexport class UsersController {}\n\n// Good: Focused on authentication\n@controller('/auth')\nexport class AuthController {}\n\n// Avoid: Mixed responsibilities\n@controller('/api')\nexport class ApiController {} // Too broad\n"})}),"\n",(0,o.jsx)(r.h3,{id:"2-consistent-naming",children:"2. Consistent Naming"}),"\n",(0,o.jsx)(r.p,{children:"Use consistent naming conventions:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"// Good: Clear and descriptive\n@controller('/users')\nexport class UsersController {}\n\n@controller('/blog-posts')\nexport class BlogPostsController {}\n\n// Avoid: Unclear names\n@controller('/u')\nexport class UController {}\n"})}),"\n",(0,o.jsx)(r.h3,{id:"3-error-handling",children:"3. Error Handling"}),"\n",(0,o.jsx)(r.p,{children:"Handle errors consistently within controllers:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@controller('/users')\nexport class UsersController {\n  @get('/:id')\n  async getUserById(req: Request, res: Response) {\n    try {\n      const id = parseInt(req.params.id);\n      const user = await userService.findById(id);\n\n      if (!user) {\n        return res.notFound({ error: 'User not found' });\n      }\n\n      res.json(user);\n    } catch (error) {\n      console.error('Error fetching user:', error);\n      res.internalServerError({ error: 'Failed to fetch user' });\n    }\n  }\n}\n"})}),"\n",(0,o.jsx)(r.h3,{id:"4-validation-and-serialization",children:"4. Validation and Serialization"}),"\n",(0,o.jsx)(r.p,{children:"Use validation and serialization decorators for type safety:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"@controller('/users')\nexport class UsersController {\n  @post('/')\n  @validate.body(CreateUserSchema)\n  @serialize(UserSchema)\n  async createUser(req: Request, res: Response, body: z.infer<typeof CreateUserSchema>) {\n    // body is now typed as CreateUser\n    const user = await userService.create(body);\n    res.created(user);\n  }\n}\n"})}),"\n",(0,o.jsx)(r.h3,{id:"5-middleware-organization",children:"5. Middleware Organization"}),"\n",(0,o.jsx)(r.p,{children:"Group related middleware and apply them at the appropriate level:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-typescript",children:"// Apply to all routes in controller\n@controller('/users')\n@middleware(authMiddleware)\nexport class UsersController {\n  // Apply to specific routes\n  @get('/admin')\n  @middleware(adminMiddleware)\n  async getAdminUsers(req: Request, res: Response) {\n    // Uses both authMiddleware and adminMiddleware\n  }\n}\n"})}),"\n",(0,o.jsx)(r.p,{children:"Controllers provide a clean, organized way to structure your Balda.js application's route handlers."})]})}function p(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>a});var s=n(6540);const o={},t=s.createContext(o);function l(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);