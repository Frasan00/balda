"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[956],{8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>a});var s=n(6540);const t={},o=s.createContext(t);function i(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(o.Provider,{value:r},e.children)}},9112:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"core-concepts/routing","title":"Routing","description":"Balda.js provides a flexible and intuitive routing system that supports both direct route registration and controller-based routing with decorators.","source":"@site/docs/core-concepts/routing.md","sourceDirName":"core-concepts","slug":"/core-concepts/routing","permalink":"/balda-js/docs/core-concepts/routing","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda-js/tree/main/docs/docs/core-concepts/routing.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docs","previous":{"title":"Controllers","permalink":"/balda-js/docs/core-concepts/controllers"},"next":{"title":"Middleware","permalink":"/balda-js/docs/core-concepts/middleware"}}');var t=n(4848),o=n(8453);const i={sidebar_position:3},a="Routing",l={},d=[{value:"Route Registration",id:"route-registration",level:2},{value:"Direct Route Registration",id:"direct-route-registration",level:3},{value:"Router Singleton Registration",id:"router-singleton-registration",level:3},{value:"Controller-Based Routing",id:"controller-based-routing",level:3},{value:"Route Parameters",id:"route-parameters",level:2},{value:"Path Parameters",id:"path-parameters",level:3},{value:"Query Parameters",id:"query-parameters",level:3},{value:"Route Options",id:"route-options",level:2},{value:"Middleware",id:"middleware",level:3},{value:"Swagger Documentation",id:"swagger-documentation",level:3},{value:"Route Patterns",id:"route-patterns",level:2},{value:"Static Routes",id:"static-routes",level:3},{value:"Dynamic Routes",id:"dynamic-routes",level:3},{value:"Optional Parameters",id:"optional-parameters",level:3},{value:"Wildcard Routes",id:"wildcard-routes",level:3},{value:"Route Precedence",id:"route-precedence",level:2},{value:"Route Groups",id:"route-groups",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"404 Not Found",id:"404-not-found",level:3},{value:"Custom 404 Handler",id:"custom-404-handler",level:3},{value:"Route Testing",id:"route-testing",level:2},{value:"Mock Server",id:"mock-server",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Controllers for Organization",id:"1-use-controllers-for-organization",level:3},{value:"2. Consistent Naming",id:"2-consistent-naming",level:3},{value:"3. Parameter Validation",id:"3-parameter-validation",level:3},{value:"4. Query Parameter Handling",id:"4-query-parameter-handling",level:3},{value:"5. Route Documentation",id:"5-route-documentation",level:3}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"routing",children:"Routing"})}),"\n",(0,t.jsx)(r.p,{children:"Balda.js provides a flexible and intuitive routing system that supports both direct route registration and controller-based routing with decorators."}),"\n",(0,t.jsx)(r.h2,{id:"route-registration",children:"Route Registration"}),"\n",(0,t.jsx)(r.h3,{id:"direct-route-registration",children:"Direct Route Registration"}),"\n",(0,t.jsx)(r.p,{children:"You can register routes directly on the server instance:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import { Server } from 'balda-js';\n\nconst server = new Server({ port: 3000 });\n\n// GET route\nserver.get('/users', (req, res) => {\n  res.json({ users: [] });\n});\n\n// POST route\nserver.post('/users', (req, res) => {\n  res.created(req.body);\n});\n\n// PUT route\nserver.put('/users/:id', (req, res) => {\n  res.json({ id: req.params.id, ...req.body });\n});\n\n// PATCH route\nserver.patch('/users/:id', (req, res) => {\n  res.json({ id: req.params.id, ...req.body });\n});\n\n// DELETE route\nserver.delete('/users/:id', (req, res) => {\n  res.noContent();\n});\n"})}),"\n",(0,t.jsx)(r.h3,{id:"router-singleton-registration",children:"Router Singleton Registration"}),"\n",(0,t.jsxs)(r.p,{children:["You can also register routes using the exported ",(0,t.jsx)(r.code,{children:"router"})," singleton. This is useful when defining routes outside of a server instance (e.g., library-level or modular route definitions). Both forms are supported: with or without middleware, and middleware can be a single function or an array."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import { router } from 'balda-js';\n\n// Handler-only\nrouter.get('/users', (req, res) => {\n  res.json({ users: [] });\n});\n\n// With single middleware\nrouter.get('/admin/users', authMiddleware, (req, res) => {\n  res.json({ users: [] });\n});\n\n// With multiple middleware\nrouter.get('/secure/users', [authMiddleware, auditMiddleware], (req, res) => {\n  res.json({ users: [] });\n});\n\n// With Swagger/OpenAPI options (optional last argument)\nrouter.get('/users', (req, res) => {\n  res.json({ users: [] });\n}, {\n  summary: 'List users',\n  tags: ['Users']\n});\n"})}),"\n",(0,t.jsx)(r.h3,{id:"controller-based-routing",children:"Controller-Based Routing"}),"\n",(0,t.jsx)(r.p,{children:"Controllers provide a more organized way to define routes:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import { controller, get, post, put, del } from 'balda-js';\n\n@controller('/users')\nexport class UsersController {\n  @get('/')\n  async getAllUsers(req, res) {\n    res.json({ users: [] });\n  }\n\n  @get('/:id')\n  async getUserById(req, res) {\n    res.json({ id: req.params.id });\n  }\n\n  @post('/')\n  async createUser(req, res) {\n    res.created(req.body);\n  }\n\n  @put('/:id')\n  async updateUser(req, res) {\n    res.json({ id: req.params.id, ...req.body });\n  }\n\n  @del('/:id')\n  async deleteUser(req, res) {\n    res.noContent();\n  }\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"route-parameters",children:"Route Parameters"}),"\n",(0,t.jsx)(r.h3,{id:"path-parameters",children:"Path Parameters"}),"\n",(0,t.jsx)(r.p,{children:"Define dynamic segments in your routes:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@controller('/users')\nexport class UsersController {\n  @get('/:id')\n  async getUserById(req, res) {\n    const id = req.params.id;\n    res.json({ id });\n  }\n\n  @get('/:userId/posts/:postId')\n  async getUserPost(req, res) {\n    const { userId, postId } = req.params;\n    res.json({ userId, postId });\n  }\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,t.jsx)(r.p,{children:"Access query string parameters:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/users')\nasync getUsers(req, res) {\n  const { page = 1, limit = 10, search } = req.query;\n\n  // Handle pagination and search\n  res.json({\n    page: parseInt(page),\n    limit: parseInt(limit),\n    search\n  });\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"route-options",children:"Route Options"}),"\n",(0,t.jsx)(r.h3,{id:"middleware",children:"Middleware"}),"\n",(0,t.jsx)(r.p,{children:"Apply middleware to specific routes:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/admin/users', { middleware: [authMiddleware, adminMiddleware] })\nasync getAdminUsers(req, res) {\n  res.json({ users: [] });\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"swagger-documentation",children:"Swagger Documentation"}),"\n",(0,t.jsx)(r.p,{children:"Add OpenAPI documentation to routes:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/', {\n  swagger: {\n    summary: 'Get all users',\n    description: 'Retrieve a list of all users with pagination',\n    tags: ['Users'],\n    responses: {\n      200: {\n        description: 'List of users',\n        content: {\n          'application/json': {\n            schema: {\n              type: 'array',\n              items: { $ref: '#/components/schemas/User' }\n            }\n          }\n        }\n      }\n    }\n  }\n})\nasync getAllUsers(req, res) {\n  res.json({ users: [] });\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"route-patterns",children:"Route Patterns"}),"\n",(0,t.jsx)(r.h3,{id:"static-routes",children:"Static Routes"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/about')\nasync getAbout(req, res) {\n  res.json({ message: 'About page' });\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"dynamic-routes",children:"Dynamic Routes"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/users/:id')\nasync getUser(req, res) {\n  const id = req.params.id;\n  res.json({ id });\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"optional-parameters",children:"Optional Parameters"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/posts/:id?')\nasync getPost(req, res) {\n  const id = req.params.id;\n  if (id) {\n    res.json({ id });\n  } else {\n    res.json({ posts: [] });\n  }\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"wildcard-routes",children:"Wildcard Routes"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/files/*')\nasync getFile(req, res) {\n  const filePath = req.params['*'];\n  res.json({ filePath });\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"route-precedence",children:"Route Precedence"}),"\n",(0,t.jsx)(r.p,{children:"Routes are matched in the order they are registered. More specific routes should be defined before more general ones:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@controller('/users')\nexport class UsersController {\n  // Specific route first\n  @get('/admin')\n  async getAdminUsers(req, res) {\n    res.json({ users: [] });\n  }\n\n  // General route after\n  @get('/:id')\n  async getUserById(req, res) {\n    res.json({ id: req.params.id });\n  }\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"route-groups",children:"Route Groups"}),"\n",(0,t.jsx)(r.p,{children:"Organize related routes using controllers:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@controller('/api/v1/users')\nexport class UsersController {\n  @get('/')\n  async getAllUsers(req, res) {\n    res.json({ users: [] });\n  }\n}\n\n@controller('/api/v1/posts')\nexport class PostsController {\n  @get('/')\n  async getAllPosts(req, res) {\n    res.json({ posts: [] });\n  }\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(r.h3,{id:"404-not-found",children:"404 Not Found"}),"\n",(0,t.jsx)(r.p,{children:"Routes that don't match any pattern return a 404 response:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"// This will be handled by the 404 handler\nserver.get('/nonexistent', (req, res) => {\n  // This won't be reached\n});\n"})}),"\n",(0,t.jsx)(r.h3,{id:"custom-404-handler",children:"Custom 404 Handler"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"server.setErrorHandler((req, res, next, error) => {\n  if (error.name === 'RouteNotFoundError') {\n    return res.notFound({\n      error: 'Route not found',\n      path: req.url\n    });\n  }\n  next(error);\n});\n"})}),"\n",(0,t.jsx)(r.h2,{id:"route-testing",children:"Route Testing"}),"\n",(0,t.jsx)(r.h3,{id:"mock-server",children:"Mock Server"}),"\n",(0,t.jsx)(r.p,{children:"Use the mock server for testing routes:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import { Server } from 'balda-js';\n\nconst server = new Server({ port: 3000 });\n\nserver.get('/users', (req, res) => {\n  res.json({ users: [] });\n});\n\n// Get mock server for testing\nconst mockServer = await server.getMockServer();\n\n// Test the route\nconst response = await mockServer.get('/users');\nconsole.log(response.statusCode()); // 200\nconsole.log(response.body()); // { users: [] }\n"})}),"\n",(0,t.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(r.h3,{id:"1-use-controllers-for-organization",children:"1. Use Controllers for Organization"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"// Good: Organized by resource\n@controller('/users')\nexport class UsersController {}\n\n@controller('/posts')\nexport class PostsController {}\n\n// Avoid: Mixed resources in one controller\n@controller('/api')\nexport class ApiController {} // Too broad\n"})}),"\n",(0,t.jsx)(r.h3,{id:"2-consistent-naming",children:"2. Consistent Naming"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"// Good: RESTful naming\n@get('/users')           // GET /users\n@get('/users/:id')       // GET /users/123\n@post('/users')          // POST /users\n@put('/users/:id')       // PUT /users/123\n@del('/users/:id')       // DELETE /users/123\n\n// Avoid: Inconsistent naming\n@get('/getUsers')\n@post('/createUser')\n@put('/updateUser')\n"})}),"\n",(0,t.jsx)(r.h3,{id:"3-parameter-validation",children:"3. Parameter Validation"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/users/:id')\nasync getUserById(req, res) {\n  const id = parseInt(req.params.id);\n\n  if (isNaN(id)) {\n    return res.badRequest({ error: 'Invalid user ID' });\n  }\n\n  res.json({ id });\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"4-query-parameter-handling",children:"4. Query Parameter Handling"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/users')\nasync getUsers(req, res) {\n  const page = Math.max(1, parseInt(req.query.page) || 1);\n  const limit = Math.min(100, Math.max(1, parseInt(req.query.limit) || 10));\n\n  res.json({ page, limit });\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"5-route-documentation",children:"5. Route Documentation"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@get('/', {\n  swagger: {\n    summary: 'Get all users',\n    description: 'Retrieve a paginated list of users',\n    tags: ['Users'],\n    parameters: [\n      {\n        name: 'page',\n        in: 'query',\n        description: 'Page number',\n        schema: { type: 'integer', default: 1 }\n      }\n    ]\n  }\n})\nasync getAllUsers(req, res) {\n  res.json({ users: [] });\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"Balda.js routing provides a powerful and flexible system for defining your application's endpoints with support for both simple and complex routing patterns."})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);