"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1108],{947:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"core-concepts/hashing","title":"Hashing","description":"Balda provides built-in secure password hashing using PBKDF2 with SHA-256.","source":"@site/docs/core-concepts/hashing.md","sourceDirName":"core-concepts","slug":"/core-concepts/hashing","permalink":"/balda/docs/core-concepts/hashing","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda/tree/main/docs/docs/core-concepts/hashing.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docs","previous":{"title":"Streaming Responses","permalink":"/balda/docs/core-concepts/streaming"},"next":{"title":"Policies","permalink":"/balda/docs/core-concepts/policies"}}');var i=n(4848),t=n(8453);const a={sidebar_position:6},o="Hashing",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Authentication Example",id:"authentication-example",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Options",id:"options",level:3},{value:"Configuration Examples",id:"configuration-examples",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"<code>server.configureHash(options): void</code>",id:"serverconfigurehashoptions-void",level:3},{value:"<code>server.hash(data: string): Promise&lt;string&gt;</code>",id:"serverhashdata-string-promisestring",level:3},{value:"<code>server.compareHash(hash: string, data: string): Promise&lt;boolean&gt;</code>",id:"servercomparehashhash-string-data-string-promiseboolean",level:3}];function l(e){const s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"hashing",children:"Hashing"})}),"\n",(0,i.jsx)(s.p,{children:"Balda provides built-in secure password hashing using PBKDF2 with SHA-256."}),"\n",(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Algorithm:"})," PBKDF2 with SHA-256"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Default iterations:"})," 600,000"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Default salt length:"})," 16 bytes"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Default key length:"})," 256 bits"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Format:"})," ",(0,i.jsx)(s.code,{children:"salt:hash"})," (base64-encoded)"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"import { Server } from 'balda';\n\nconst server = new Server();\n\n// Hash a password\nconst hashedPassword = await server.hash('user-password-123');\n\n// Verify password\nconst isValid = await server.compareHash(hashedPassword, 'user-password-123');\nconsole.log(isValid); // true\n"})}),"\n",(0,i.jsx)(s.h2,{id:"authentication-example",children:"Authentication Example"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"import { controller, post } from 'balda';\n\n@controller('/auth')\nexport class AuthController {\n  @post('/register')\n  async register(req: Request, res: Response) {\n    const { email, password } = req.parsedBody;  // Automatically parsed when using body parser middleware with json setting\n\n    const hashedPassword = await server.hash(password);\n    await saveUser(email, hashedPassword);\n\n    res.created({ message: 'User registered' });\n  }\n\n  @post('/login')\n  async login(req: Request, res: Response) {\n    const { email, password } = req.parsedBody;  // Automatically parsed when using body parser middleware with json setting\n\n    const user = await findUser(email);\n    const isValid = await server.compareHash(user.passwordHash, password);\n\n    if (!isValid) {\n      return res.unauthorized({ error: 'Invalid credentials' });\n    }\n\n    res.json({ token: generateToken(user) });\n  }\n}\n"})}),"\n",(0,i.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(s.p,{children:"Customize hashing parameters to balance security and performance:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"const server = new Server();\n\nserver.configureHash({\n  iterations: 1_000_000,  // Default: 600,000 (min: 1)\n  saltLength: 32,         // Default: 16 bytes (min: 8)\n  keyLength: 512          // Default: 256 bits (min: 128)\n});\n"})}),"\n",(0,i.jsx)(s.h3,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Option"}),(0,i.jsx)(s.th,{children:"Default"}),(0,i.jsx)(s.th,{children:"Min"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"iterations"})}),(0,i.jsx)(s.td,{children:"600,000"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"PBKDF2 iterations. Higher = more secure, slower"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"saltLength"})}),(0,i.jsx)(s.td,{children:"16 bytes"}),(0,i.jsx)(s.td,{children:"8"}),(0,i.jsx)(s.td,{children:"Random salt length. Longer = more secure"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"keyLength"})}),(0,i.jsx)(s.td,{children:"256 bits"}),(0,i.jsx)(s.td,{children:"128"}),(0,i.jsx)(s.td,{children:"Derived key length"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"// Development (faster hashing)\nif (process.env.NODE_ENV === 'development') {\n  server.configureHash({ iterations: 10_000 });\n}\n\n// High security\nserver.configureHash({\n  iterations: 1_500_000,\n  saltLength: 32,\n  keyLength: 512\n});\n"})}),"\n",(0,i.jsx)(s.admonition,{type:"caution",children:(0,i.jsxs)(s.p,{children:["Configure hash settings ",(0,i.jsx)(s.strong,{children:"before"})," hashing passwords. Changing configuration makes existing hashes incompatible."]})}),"\n",(0,i.jsx)(s.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"// \u2705 Always hash passwords before storing\nconst passwordHash = await server.hash(password);\n\n// \u2705 Use strong password requirements\nconst minLength = 12;\nconst requireUppercase = true;\nconst requireNumbers = true;\nconst requireSpecialChars = true;\n\n// \u2705 Implement rate limiting on auth endpoints\nimport { rateLimiter } from 'balda';\nserver.use('/auth/login', rateLimiter({\n  windowMs: 15 * 60 * 1000,\n  max: 5\n}));\n\n// \u2705 Use HTTPS in production\n// \u2705 Log security events (failed logins, etc.)\n"})}),"\n",(0,i.jsx)(s.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,i.jsx)(s.h3,{id:"serverconfigurehashoptions-void",children:(0,i.jsx)(s.code,{children:"server.configureHash(options): void"})}),"\n",(0,i.jsx)(s.p,{children:"Configure hash settings."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"server.configureHash({\n  iterations?: number,   // Default: 600,000, min: 1\n  saltLength?: number,   // Default: 16 bytes, min: 8\n  keyLength?: number     // Default: 256 bits, min: 128\n});\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Throws:"})," ",(0,i.jsx)(s.code,{children:"Error"})," if values are below minimum thresholds."]}),"\n",(0,i.jsx)(s.h3,{id:"serverhashdata-string-promisestring",children:(0,i.jsx)(s.code,{children:"server.hash(data: string): Promise<string>"})}),"\n",(0,i.jsx)(s.p,{children:"Hash a string using PBKDF2 with SHA-256."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"const hash = await server.hash('my-password');\n// Returns: \"base64-salt:base64-hash\"\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Throws:"})," ",(0,i.jsx)(s.code,{children:"Error"})," if data is empty."]}),"\n",(0,i.jsx)(s.h3,{id:"servercomparehashhash-string-data-string-promiseboolean",children:(0,i.jsx)(s.code,{children:"server.compareHash(hash: string, data: string): Promise<boolean>"})}),"\n",(0,i.jsx)(s.p,{children:"Verify a string against a hash."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"const isValid = await server.compareHash(hash, 'my-password');\n// Returns: true or false\n"})})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var r=n(6540);const i={},t=r.createContext(i);function a(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);