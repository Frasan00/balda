"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8753],{1483:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"cron/ui","title":"Cron UI","description":"Balda provides a built-in web dashboard to visualize and monitor your scheduled cron jobs. This feature helps you quickly see all registered cron jobs, their schedules, frequencies, and timezones in a modern, filterable interface.","source":"@site/docs/cron/ui.md","sourceDirName":"cron","slug":"/cron/ui","permalink":"/balda/docs/cron/ui","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda/tree/main/docs/docs/cron/ui.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docs","previous":{"title":"Overview","permalink":"/balda/docs/cron/overview"},"next":{"title":"overview","permalink":"/balda/docs/queues/overview"}}');var s=r(4848),i=r(8453);const t={sidebar_position:7},c="Cron UI",a={},d=[{value:"Basic Setup",id:"basic-setup",level:2},{value:"Features",id:"features",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"CronUIOptions",id:"cronuioptions",level:3},{value:"Example",id:"example",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Protecting the Dashboard",id:"protecting-the-dashboard",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Dashboard shows &quot;No cron jobs configured&quot;",id:"dashboard-shows-no-cron-jobs-configured",level:3},{value:"Error: &quot;cronstrue not installed as a dependency&quot;",id:"error-cronstrue-not-installed-as-a-dependency",level:3},{value:"Cron UI path conflicts with existing route",id:"cron-ui-path-conflicts-with-existing-route",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"<code>cronUi(options: CronUIOptions)</code>",id:"cronuioptions-cronuioptions",level:3},{value:"<code>cronUIInstance.generate()</code>",id:"cronuiinstancegenerate",level:3},{value:"Related",id:"related",level:2}];function l(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cron-ui",children:"Cron UI"})}),"\n",(0,s.jsxs)(n.p,{children:["Balda provides a ",(0,s.jsx)(n.strong,{children:"built-in web dashboard"})," to visualize and monitor your scheduled cron jobs. This feature helps you quickly see all registered cron jobs, their schedules, frequencies, and timezones in a modern, filterable interface."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Peer dependency"})," \u2014 The Cron UI requires ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/cronstrue",children:(0,s.jsx)(n.code,{children:"cronstrue"})})," to convert cron expressions into human-readable descriptions. To enable the UI, you must install it:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# with npm\nnpm install cronstrue\n\n# or with yarn / pnpm / bun\nyarn add cronstrue\npnpm add cronstrue\nbun add cronstrue\n"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,s.jsxs)(n.p,{children:["Enable the Cron UI by adding the ",(0,s.jsx)(n.code,{children:"cronUI"})," option to your server configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Server } from 'balda';\n\nconst server = new Server({\n  port: 3000,\n  cronUI: {\n    path: '/cron-dashboard'\n  }\n});\n\nawait server.listen();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once enabled, navigate to ",(0,s.jsx)(n.code,{children:"http://localhost:3000/cron-dashboard"})," to view your cron jobs dashboard."]}),"\n",(0,s.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,s.jsx)(n.p,{children:"The Cron UI dashboard provides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Job Overview"}),": Display all registered cron jobs with their names and schedules"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Human-Readable Schedules"}),": Automatic conversion of cron expressions (e.g., ",(0,s.jsx)(n.code,{children:"0 0 * * *"}),' \u2192 "At 12:00 AM")']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search"}),": Filter jobs by name in real-time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Frequency Filter"}),": Filter jobs by their execution frequency"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Timezone Filter"}),": Filter jobs by their configured timezone"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Live Counter"}),": Shows total jobs and currently visible jobs after filtering"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Modern UI"}),": Dark-themed, responsive interface with smooth animations"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,s.jsx)(n.h3,{id:"cronuioptions",children:"CronUIOptions"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"path"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"The route path where the dashboard will be accessible"})]})})]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.p,{children:"Here's a complete example with multiple cron jobs:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Server, cron, CronService } from 'balda';\n\n// Define your cron jobs\nclass BackupCron {\n  @cron('0 2 * * *', { timezone: 'UTC' })\n  async dailyBackup() {\n    console.log('Running daily backup at 2 AM UTC');\n    // Backup logic here\n  }\n}\n\nclass NotificationCron {\n  @cron('*/5 * * * *')\n  async checkNotifications() {\n    console.log('Checking notifications every 5 minutes');\n    // Notification logic here\n  }\n}\n\nclass ReportCron {\n  @cron('0 9 * * 1', { timezone: 'America/New_York' })\n  async weeklyReport() {\n    console.log('Generating weekly report every Monday at 9 AM EST');\n    // Report logic here\n  }\n}\n\n// Start the server with Cron UI\nconst server = new Server({\n  port: 3000,\n  cronUI: {\n    path: '/cron-dashboard'\n  }\n});\n\n// Import and start cron jobs\nawait CronService.massiveImportCronJobs(['src/cron/**/*.{ts,js}']);\nawait CronService.run();\n\nawait server.listen();\n\nconsole.log('Server running on http://localhost:3000');\nconsole.log('Cron Dashboard available at http://localhost:3000/cron-dashboard');\n"})}),"\n",(0,s.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"The Cron UI is publicly accessible by default. In production environments, you should protect this route with authentication middleware."})}),"\n",(0,s.jsx)(n.h3,{id:"protecting-the-dashboard",children:"Protecting the Dashboard"}),"\n",(0,s.jsx)(n.p,{children:"Use middleware to add authentication to the Cron UI route:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Server, middleware } from 'balda';\n\n// Define authentication middleware\nclass AuthMiddleware {\n  @middleware()\n  async checkAuth(req, res, next) {\n    const apiKey = req.headers['x-api-key'];\n\n    if (apiKey !== process.env.ADMIN_API_KEY) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    next();\n  }\n}\n\n// Apply to server\nconst server = new Server({\n  port: 3000,\n  cronUI: {\n    path: '/cron-dashboard'\n  }\n});\n\n// You can add authentication by using a global middleware\n// or by defining a custom route handler for your dashboard\n"})}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, you can disable the built-in UI in production and build your own protected endpoint:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { cronUIInstance } from 'balda';\nimport { Router } from 'express';\n\nconst router = Router();\n\nrouter.get('/admin/cron', authenticateAdmin, async (req, res) => {\n  const html = await cronUIInstance.generate();\n  res.send(html);\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"dashboard-shows-no-cron-jobs-configured",children:'Dashboard shows "No cron jobs configured"'}),"\n",(0,s.jsx)(n.p,{children:"This happens when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["No cron jobs have been registered with ",(0,s.jsx)(n.code,{children:"@cron"})," decorator"]}),"\n",(0,s.jsx)(n.li,{children:"Cron jobs haven't been imported before the server starts"}),"\n",(0,s.jsxs)(n.li,{children:["Cron jobs are defined but ",(0,s.jsx)(n.code,{children:"CronService.run()"})," hasn't been called"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Make sure to import your cron jobs and call ",(0,s.jsx)(n.code,{children:"CronService.run()"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"await CronService.massiveImportCronJobs(['src/cron/**/*.{ts,js}']);\nawait CronService.run();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"error-cronstrue-not-installed-as-a-dependency",children:'Error: "cronstrue not installed as a dependency"'}),"\n",(0,s.jsxs)(n.p,{children:["The Cron UI requires ",(0,s.jsx)(n.code,{children:"cronstrue"})," to convert cron expressions to human-readable text."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Install the peer dependency:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install cronstrue\n"})}),"\n",(0,s.jsx)(n.h3,{id:"cron-ui-path-conflicts-with-existing-route",children:"Cron UI path conflicts with existing route"}),"\n",(0,s.jsx)(n.p,{children:"If you have an existing route that conflicts with the Cron UI path, you'll need to choose a different path."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Use a unique path for the dashboard:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"cronUI: {\n  path: '/admin/cron-jobs'\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(n.h3,{id:"cronuioptions-cronuioptions",children:(0,s.jsx)(n.code,{children:"cronUi(options: CronUIOptions)"})}),"\n",(0,s.jsx)(n.p,{children:"Registers the Cron UI dashboard route."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options: CronUIOptions"})," - Configuration object with the following properties:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path: string"})," - The route path where the dashboard will be accessible (required)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Throws:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"BaldaError"})," if ",(0,s.jsx)(n.code,{children:"path"})," is not provided or is empty"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { cronUi } from 'balda';\n\n// Manually register the Cron UI\nawait cronUi({\n  path: '/cron-dashboard'\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"cronuiinstancegenerate",children:(0,s.jsx)(n.code,{children:"cronUIInstance.generate()"})}),"\n",(0,s.jsx)(n.p,{children:"Generates the HTML for the Cron UI dashboard. This is useful if you want to create a custom route with authentication."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<string>"})," - HTML string of the dashboard"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { cronUIInstance } from 'balda';\n\nconst html = await cronUIInstance.generate();\n// Use the HTML string as needed\n"})}),"\n",(0,s.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/balda/docs/cron/overview",children:"Cron Overview"})," - Learn about the ",(0,s.jsx)(n.code,{children:"@cron"})," decorator"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/balda/docs/cron/overview#error-handling",children:"Error Handling"})," - Handle cron job errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/balda/docs/cron/overview#starting-cron-jobs",children:"Starting Cron Jobs"})," - Import and start cron jobs"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>c});var o=r(6540);const s={},i=o.createContext(s);function t(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);