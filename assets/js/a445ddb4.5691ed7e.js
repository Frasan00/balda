"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7231],{3863:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"testing/examples","title":"Testing Examples","description":"This guide provides practical examples of testing with Balda MockServer, covering common scenarios and patterns.","source":"@site/docs/testing/examples.md","sourceDirName":"testing","slug":"/testing/examples","permalink":"/balda/docs/testing/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda/tree/main/docs/docs/testing/examples.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"MockServer Testing","permalink":"/balda/docs/testing/mock-server"},"next":{"title":"Overview","permalink":"/balda/docs/cron/overview"}}');var r=t(4848),i=t(8453);const a={},o="Testing Examples",c={},d=[{value:"Basic API Testing",id:"basic-api-testing",level:2},{value:"Simple GET Request",id:"simple-get-request",level:3},{value:"GET with Query Parameters",id:"get-with-query-parameters",level:3},{value:"GET with Headers",id:"get-with-headers",level:3},{value:"POST Request Testing",id:"post-request-testing",level:2},{value:"JSON Body",id:"json-body",level:3},{value:"Form Data (URL Encoded)",id:"form-data-url-encoded",level:3},{value:"File Upload",id:"file-upload",level:3},{value:"Error Handling Examples",id:"error-handling-examples",level:2},{value:"404 Not Found",id:"404-not-found",level:3},{value:"409 Conflict",id:"409-conflict",level:3},{value:"Server Error",id:"server-error",level:3},{value:"CRUD Operations Testing",id:"crud-operations-testing",level:2},{value:"Complete CRUD Test Suite",id:"complete-crud-test-suite",level:3},{value:"Authentication Testing",id:"authentication-testing",level:2},{value:"Protected Routes",id:"protected-routes",level:3},{value:"Cookie Testing",id:"cookie-testing",level:2},{value:"Setting and Reading Cookies",id:"setting-and-reading-cookies",level:3},{value:"Advanced Testing Patterns",id:"advanced-testing-patterns",level:2},{value:"Testing with Custom Headers",id:"testing-with-custom-headers",level:3},{value:"Testing with IP Address",id:"testing-with-ip-address",level:3},{value:"Testing Query Parameters",id:"testing-query-parameters",level:3},{value:"Testing Middleware",id:"testing-middleware",level:2},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"CORS Testing",id:"cors-testing",level:3},{value:"Performance Testing",id:"performance-testing",level:2},{value:"Load Testing with MockServer",id:"load-testing-with-mockserver",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Test Organization",id:"test-organization",level:3},{value:"Type Safety",id:"type-safety",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"testing-examples",children:"Testing Examples"})}),"\n",(0,r.jsx)(n.p,{children:"This guide provides practical examples of testing with Balda MockServer, covering common scenarios and patterns."}),"\n",(0,r.jsx)(n.h2,{id:"basic-api-testing",children:"Basic API Testing"}),"\n",(0,r.jsx)(n.h3,{id:"simple-get-request",children:"Simple GET Request"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import { describe, it, expect } from "vitest";\nimport { mockServer } from "test/server/instance";\n\ndescribe("Basic API Tests", () => {\n  it("GET /users returns user list", async () => {\n    const res = await mockServer.get("/users");\n\n    expect(res.statusCode()).toBe(200);\n    expect(Array.isArray(res.body())).toBe(true);\n    expect(res.body().length).toBeGreaterThan(0);\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"get-with-query-parameters",children:"GET with Query Parameters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("GET /users with pagination", async () => {\n  const res = await mockServer.get("/users", {\n    query: { page: "1", limit: "5" }\n  });\n\n  expect(res.statusCode()).toBe(200);\n  expect(res.body().length).toBeLessThanOrEqual(5);\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"get-with-headers",children:"GET with Headers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("GET /protected with authorization", async () => {\n  const res = await mockServer.get("/protected", {\n    headers: { "Authorization": "Bearer token123" }\n  });\n\n  expect(res.statusCode()).toBe(200);\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"post-request-testing",children:"POST Request Testing"}),"\n",(0,r.jsx)(n.h3,{id:"json-body",children:"JSON Body"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("POST /users creates new user", async () => {\n  const newUser = {\n    name: "John Doe",\n    email: "john@example.com",\n    age: 30\n  };\n\n  const res = await mockServer.post("/users", { body: newUser });\n\n  expect(res.statusCode()).toBe(201);\n  expect(res.assertBodyDeepEqual(newUser));\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"form-data-url-encoded",children:"Form Data (URL Encoded)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("POST /users with form data", async () => {\n  const res = await mockServer.post("/users", {\n    urlencoded: {\n      name: "Jane Doe",\n      email: "jane@example.com",\n      age: "25"\n    }\n  });\n\n  expect(res.statusCode()).toBe(201);\n  expect(res.assertBodySubset({ name: "Jane Doe" }));\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"file-upload",children:"File Upload"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("POST /upload handles file upload", async () => {\n  const formData = new FormData();\n  const fileContent = new Uint8Array([1, 2, 3, 4, 5]);\n  formData.append("file", new Blob([fileContent]), "test.txt");\n\n  const res = await mockServer.post("/upload", { formData });\n\n  expect(res.statusCode()).toBe(200);\n  expect(res.body()).toEqual({\n    originalName: "test.txt",\n    filename: "file",\n    size: 5,\n    mimetype: "application/octet-stream"\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"error-handling-examples",children:"Error Handling Examples"}),"\n",(0,r.jsx)(n.h3,{id:"404-not-found",children:"404 Not Found"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("GET /users/999 returns 404", async () => {\n  const res = await mockServer.get("/users/999");\n\n  expect(res.statusCode()).toBe(404);\n  expect(res.assertBodyDeepEqual({ error: "User not found" }));\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"409-conflict",children:"409 Conflict"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("POST /users returns 409 for existing user", async () => {\n  const existingUser = {\n    id: 1,\n    name: "John Doe",\n    email: "john.doe@example.com",\n    age: 20\n  };\n\n  const res = await mockServer.post("/users", { body: existingUser });\n\n  expect(res.statusCode()).toBe(409);\n  expect(res.assertBodyDeepEqual({ error: "User already exists" }));\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"server-error",children:"Server Error"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("GET /users with shouldFail=true returns 500", async () => {\n  const res = await mockServer.get("/users", {\n    query: { shouldFail: "true" }\n  });\n\n  expect(res.statusCode()).toBe(500);\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"crud-operations-testing",children:"CRUD Operations Testing"}),"\n",(0,r.jsx)(n.h3,{id:"complete-crud-test-suite",children:"Complete CRUD Test Suite"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'describe("User CRUD Operations", () => {\n  it("creates a new user", async () => {\n    const newUser = { id: 3, name: "New User", email: "new@example.com", age: 30 };\n\n    const res = await mockServer.post("/users", { body: newUser });\n\n    expect(res.statusCode()).toBe(201);\n    expect(res.assertBodyDeepEqual(newUser));\n  });\n\n  it("reads a specific user", async () => {\n    const res = await mockServer.get("/users/1");\n\n    expect(res.statusCode()).toBe(200);\n    expect(res.assertBodySubset({ id: 1 }));\n  });\n\n  it("updates a user", async () => {\n    const res = await mockServer.patch("/users/1", {\n      body: { name: "Updated Name" }\n    });\n\n    expect(res.statusCode()).toBe(200);\n    expect(res.assertBodySubset({ id: 1, name: "Updated Name" }));\n  });\n\n  it("deletes a user", async () => {\n    const res = await mockServer.delete("/users/1");\n\n    expect(res.statusCode()).toBe(204);\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"authentication-testing",children:"Authentication Testing"}),"\n",(0,r.jsx)(n.h3,{id:"protected-routes",children:"Protected Routes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'describe("Authentication", () => {\n  it("accesses protected route with valid token", async () => {\n    const res = await mockServer.get("/protected", {\n      headers: { "Authorization": "Bearer valid-token" }\n    });\n\n    expect(res.statusCode()).toBe(200);\n  });\n\n  it("rejects access without token", async () => {\n    const res = await mockServer.get("/protected");\n\n    expect(res.statusCode()).toBe(401);\n  });\n\n  it("rejects access with invalid token", async () => {\n    const res = await mockServer.get("/protected", {\n      headers: { "Authorization": "Bearer invalid-token" }\n    });\n\n    expect(res.statusCode()).toBe(401);\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"cookie-testing",children:"Cookie Testing"}),"\n",(0,r.jsx)(n.h3,{id:"setting-and-reading-cookies",children:"Setting and Reading Cookies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'describe("Cookie Handling", () => {\n  it("sets session cookie on login", async () => {\n    const res = await mockServer.post("/login", {\n      body: { username: "user", password: "pass" }\n    });\n\n    expect(res.statusCode()).toBe(200);\n    expect(res.headers()["set-cookie"]).toContain("sessionId");\n  });\n\n  it("uses existing session cookie", async () => {\n    const res = await mockServer.get("/profile", {\n      cookies: { sessionId: "valid-session" }\n    });\n\n    expect(res.statusCode()).toBe(200);\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"advanced-testing-patterns",children:"Advanced Testing Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"testing-with-custom-headers",children:"Testing with Custom Headers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("handles custom headers", async () => {\n  const res = await mockServer.get("/api/data", {\n    headers: {\n      "X-API-Key": "secret-key",\n      "X-Client-Version": "1.0.0",\n      "Content-Type": "application/json"\n    }\n  });\n\n  expect(res.statusCode()).toBe(200);\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"testing-with-ip-address",children:"Testing with IP Address"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("handles IP-based logic", async () => {\n  const res = await mockServer.get("/location", {\n    ip: "192.168.1.100"\n  });\n\n  expect(res.statusCode()).toBe(200);\n  expect(res.body()).toHaveProperty("ip", "192.168.1.100");\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"testing-query-parameters",children:"Testing Query Parameters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'it("handles complex query parameters", async () => {\n  const res = await mockServer.get("/search", {\n    query: {\n      q: "search term",\n      category: "technology",\n      sort: "date",\n      order: "desc",\n      page: "1",\n      limit: "20"\n    }\n  });\n\n  expect(res.statusCode()).toBe(200);\n  expect(res.body()).toHaveProperty("results");\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"testing-middleware",children:"Testing Middleware"}),"\n",(0,r.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'describe("Rate Limiting", () => {\n  it("allows requests within limit", async () => {\n    const res = await mockServer.get("/api/limited");\n    expect(res.statusCode()).toBe(200);\n  });\n\n  it("blocks requests over limit", async () => {\n    // Simulate multiple requests\n    for (let i = 0; i < 10; i++) {\n      await mockServer.get("/api/limited");\n    }\n\n    const res = await mockServer.get("/api/limited");\n    expect(res.statusCode()).toBe(429);\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"cors-testing",children:"CORS Testing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'describe("CORS", () => {\n  it("handles preflight OPTIONS request", async () => {\n    const res = await mockServer.request("OPTIONS", "/api/data", {\n      headers: {\n        "Origin": "https://example.com",\n        "Access-Control-Request-Method": "POST"\n      }\n    });\n\n    expect(res.statusCode()).toBe(200);\n    expect(res.headers()["access-control-allow-origin"]).toBe("*");\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"performance-testing",children:"Performance Testing"}),"\n",(0,r.jsx)(n.h3,{id:"load-testing-with-mockserver",children:"Load Testing with MockServer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'describe("Performance", () => {\n  it("handles multiple concurrent requests", async () => {\n    const promises = Array.from({ length: 100 }, () =>\n      mockServer.get("/api/data")\n    );\n\n    const results = await Promise.all(promises);\n\n    results.forEach(res => {\n      expect(res.statusCode()).toBe(200);\n    });\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"test-organization",children:"Test Organization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'describe("User API", () => {\n  describe("GET /users", () => {\n    it("returns all users", async () => {\n      // Test implementation\n    });\n\n    it("supports pagination", async () => {\n      // Test implementation\n    });\n  });\n\n  describe("POST /users", () => {\n    it("creates new user", async () => {\n      // Test implementation\n    });\n\n    it("validates required fields", async () => {\n      // Test implementation\n    });\n  });\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"type-safety",children:"Type Safety"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'interface User {\n  id: number;\n  name: string;\n  email: string;\n  age: number;\n}\n\ndescribe("Type-safe testing", () => {\n  it("returns properly typed user data", async () => {\n    const res = await mockServer.get<User[]>("/users");\n    const users = res.body() as User[];\n\n    expect(users[0]).toHaveProperty("id");\n    expect(users[0]).toHaveProperty("name");\n    expect(users[0]).toHaveProperty("email");\n  });\n});\n'})}),"\n",(0,r.jsx)(n.p,{children:"These examples demonstrate the flexibility and power of MockServer for comprehensive API testing in Balda applications."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(6540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);