"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3459],{8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>i});var l=s(6540);const o={},r=l.createContext(o);function t(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),l.createElement(r.Provider,{value:n},e.children)}},9823:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>g,frontMatter:()=>t,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"plugins/log","title":"Log Plugin","description":"Provides comprehensive request and response logging for your application. Automatically logs HTTP requests and responses with configurable detail levels.","source":"@site/docs/plugins/log.md","sourceDirName":"plugins","slug":"/plugins/log","permalink":"/balda-js/docs/plugins/log","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda-js/tree/main/docs/docs/plugins/log.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"docs","previous":{"title":"Cookie Plugin","permalink":"/balda-js/docs/plugins/cookie"},"next":{"title":"Async Local Storage Plugin","permalink":"/balda-js/docs/plugins/async-local-storage"}}');var o=s(4848),r=s(8453);const t={sidebar_position:8},i="Log Plugin",d={},a=[{value:"Quick Start",id:"quick-start",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Basic Configuration",id:"basic-configuration",level:3},{value:"Detailed Configuration",id:"detailed-configuration",level:3},{value:"Usage",id:"usage",level:2},{value:"Global Logging",id:"global-logging",level:3},{value:"Route-Level Logging",id:"route-level-logging",level:3},{value:"Log Output",id:"log-output",level:2},{value:"Request Log",id:"request-log",level:3},{value:"Response Log",id:"response-log",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"requestPayload Options",id:"requestpayload-options",level:3},{value:"responsePayload Options",id:"responsepayload-options",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Production Logging",id:"production-logging",level:3},{value:"Development Logging",id:"development-logging",level:3},{value:"API Monitoring",id:"api-monitoring",level:3},{value:"Minimal Logging",id:"minimal-logging",level:3},{value:"Environment-Based Configuration",id:"environment-based-configuration",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"Disabling Logging",id:"disabling-logging",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"log-plugin",children:"Log Plugin"})}),"\n",(0,o.jsx)(n.p,{children:"Provides comprehensive request and response logging for your application. Automatically logs HTTP requests and responses with configurable detail levels."}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { Server } from 'balda-js';\n\nconst server = new Server({\n  plugins: {\n    log: {\n      logRequest: true,\n      logResponse: true\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"log: {\n  logRequest: true,           // Enable request logging\n  logResponse: true           // Enable response logging\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"detailed-configuration",children:"Detailed Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"log: {\n  logRequest: true,\n  logResponse: true,\n  requestPayload: {\n    method: true,             // Log HTTP method\n    url: true,                // Log request URL\n    ip: true,                 // Log client IP\n    headers: true,            // Log request headers\n    body: false               // Log request body (default: false)\n  },\n  responsePayload: {\n    status: true,             // Log response status\n    headers: false,           // Log response headers (default: false)\n    body: false               // Log response body (default: false)\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.h3,{id:"global-logging",children:"Global Logging"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  plugins: {\n    log: {\n      logRequest: true,\n      logResponse: true,\n      requestPayload: {\n        method: true,\n        url: true,\n        ip: true,\n        headers: false,        // Disable for privacy\n        body: false\n      },\n      responsePayload: {\n        status: true,\n        headers: false,\n        body: false\n      }\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"route-level-logging",children:"Route-Level Logging"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { log } from 'balda-js';\n\n@controller('/api')\nexport class ApiController {\n  @get('/users', {\n    middleware: [log({\n      logRequest: true,\n      logResponse: true\n    })]\n  })\n  async getUsers(req: Request, res: Response) {\n    res.json(await getUsers());\n  }\n\n  // Disable logging for health checks\n  @get('/health', {\n    middleware: [log({\n      logRequest: false,\n      logResponse: false\n    })]\n  })\n  async health(req: Request, res: Response) {\n    res.json({ status: 'ok' });\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"log-output",children:"Log Output"}),"\n",(0,o.jsx)(n.h3,{id:"request-log",children:"Request Log"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "level": 30,\n  "time": 1234567890,\n  "type": "request",\n  "requestId": "abc123",\n  "method": "GET",\n  "url": "/api/users",\n  "headers": {}\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"response-log",children:"Response Log"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "level": 30,\n  "time": 1234567891,\n  "type": "response",\n  "requestId": "abc123",\n  "status": 200\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,o.jsx)(n.h3,{id:"requestpayload-options",children:"requestPayload Options"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Type"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"method"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsx)(n.td,{children:"Log HTTP method"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"url"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsx)(n.td,{children:"Log request URL"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"ip"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsx)(n.td,{children:"Log client IP"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"headers"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsx)(n.td,{children:"Log request headers"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"body"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})}),(0,o.jsx)(n.td,{children:"Log request body"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"responsepayload-options",children:"responsePayload Options"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Type"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"status"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsx)(n.td,{children:"Log response status"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"headers"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})}),(0,o.jsx)(n.td,{children:"Log response headers"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"body"})}),(0,o.jsx)(n.td,{children:"boolean"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})}),(0,o.jsx)(n.td,{children:"Log response body"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,o.jsx)(n.h3,{id:"production-logging",children:"Production Logging"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"log: {\n  logRequest: true,\n  logResponse: true,\n  requestPayload: {\n    method: true,\n    url: true,\n    ip: true,\n    headers: false,      // Don't log sensitive headers\n    body: false          // Don't log request bodies\n  },\n  responsePayload: {\n    status: true,\n    headers: false,\n    body: false\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"development-logging",children:"Development Logging"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"log: {\n  logRequest: true,\n  logResponse: true,\n  requestPayload: {\n    method: true,\n    url: true,\n    ip: true,\n    headers: true,\n    body: true           // Log everything in development\n  },\n  responsePayload: {\n    status: true,\n    headers: true,\n    body: true\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"api-monitoring",children:"API Monitoring"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"log: {\n  logRequest: true,\n  logResponse: true,\n  requestPayload: {\n    method: true,\n    url: true,\n    ip: true,\n    headers: false,\n    body: false\n  },\n  responsePayload: {\n    status: true,         // Track status codes\n    headers: false,\n    body: false\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"minimal-logging",children:"Minimal Logging"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"log: {\n  logRequest: true,\n  logResponse: false,\n  requestPayload: {\n    method: true,\n    url: true,\n    ip: false,\n    headers: false,\n    body: false\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"environment-based-configuration",children:"Environment-Based Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const isProduction = process.env.NODE_ENV === 'production';\n\nconst server = new Server({\n  plugins: {\n    log: {\n      logRequest: true,\n      logResponse: true,\n      requestPayload: {\n        method: true,\n        url: true,\n        ip: true,\n        headers: !isProduction,  // Only in development\n        body: !isProduction      // Only in development\n      },\n      responsePayload: {\n        status: true,\n        headers: !isProduction,\n        body: !isProduction\n      }\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  port: 3000,\n  plugins: {\n    log: {\n      logRequest: true,\n      logResponse: true,\n      requestPayload: {\n        method: true,\n        url: true,\n        ip: true,\n        headers: false,\n        body: false\n      },\n      responsePayload: {\n        status: true,\n        headers: false,\n        body: false\n      }\n    }\n  }\n});\n\n@controller('/api')\nexport class ApiController {\n  @get('/users')\n  async getUsers(req: Request, res: Response) {\n    // Logs: GET /api/users \u2192 200\n    const users = await getUsers();\n    res.json(users);\n  }\n\n  @get('/health', {\n    middleware: [log({ logRequest: false, logResponse: false })]\n  })\n  async health(req: Request, res: Response) {\n    // No logging for health checks\n    res.json({ status: 'ok' });\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"disabling-logging",children:"Disabling Logging"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  plugins: {\n    log: {\n      logRequest: false,\n      logResponse: false\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Don't log sensitive data"})," - Disable headers/body logging in production"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Exclude health checks"})," - Use route-level logging to exclude health endpoints"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Monitor performance"})," - Track response times and status codes"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Use structured logging"})," - JSON format makes logs easy to parse"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Configure by environment"})," - More verbose in development, minimal in production"]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);