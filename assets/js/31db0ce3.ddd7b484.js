"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3550],{2371:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>g,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"core-concepts/logger","title":"Logger","description":"Balda provides built-in structured logging powered by Pino - a fast, low-overhead logger for Node.js, Bun, and Deno.","source":"@site/docs/core-concepts/logger.md","sourceDirName":"core-concepts","slug":"/core-concepts/logger","permalink":"/balda/docs/core-concepts/logger","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda/tree/main/docs/docs/core-concepts/logger.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docs","previous":{"title":"Hashing","permalink":"/balda/docs/core-concepts/hashing"},"next":{"title":"Policies","permalink":"/balda/docs/core-concepts/policies"}}');var o=r(4848),s=r(8453);const l={sidebar_position:7},t="Logger",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Global Configuration",id:"global-configuration",level:2},{value:"Configuration Options",id:"configuration-options",level:3},{value:"Pretty-Printed Logs (Development)",id:"pretty-printed-logs-development",level:3},{value:"JSON Logs (Production)",id:"json-logs-production",level:3},{value:"Environment-Based Configuration",id:"environment-based-configuration",level:3},{value:"Scoped Loggers",id:"scoped-loggers",level:2},{value:"Scoped Logger Pattern in Classes",id:"scoped-logger-pattern-in-classes",level:3},{value:"Service Logger Override",id:"service-logger-override",level:2},{value:"Correct Order",id:"correct-order",level:3},{value:"Manual Service Logger Override",id:"manual-service-logger-override",level:3},{value:"Log Levels",id:"log-levels",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"<code>defineLoggerConfig(options?): Logger</code>",id:"defineloggerconfigoptions-logger",level:3},{value:"<code>logger</code>",id:"logger-1",level:3},{value:"Learn More",id:"learn-more",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"logger",children:"Logger"})}),"\n",(0,o.jsxs)(n.p,{children:["Balda provides built-in structured logging powered by ",(0,o.jsx)(n.a,{href:"https://getpino.io/",children:"Pino"})," - a fast, low-overhead logger for Node.js, Bun, and Deno."]}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Library:"})," Pino ^10.1.0"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Default level:"})," ",(0,o.jsx)(n.code,{children:"info"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Format:"})," JSON (structured logs)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Runtimes:"})," Node.js, Bun, Deno"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { logger } from 'balda';\n\nlogger.info('Server starting');\nlogger.error('Something went wrong', { error: err });\nlogger.warn('High memory usage');\nlogger.debug('Debug information', { context: data });\n"})}),"\n",(0,o.jsx)(n.h2,{id:"global-configuration",children:"Global Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.code,{children:"defineLoggerConfig()"})," to override the default logger configuration. This must be called ",(0,o.jsx)(n.strong,{children:"before"})," creating the server or importing services that use the logger."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { defineLoggerConfig, Server } from 'balda';\n\n// Configure logger first\ndefineLoggerConfig({\n  level: 'debug',\n});\n\nconst server = new Server();\n"})}),"\n",(0,o.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,o.jsxs)(n.p,{children:["Balda's ",(0,o.jsx)(n.code,{children:"defineLoggerConfig()"})," accepts any ",(0,o.jsx)(n.a,{href:"https://getpino.io/#/docs/api?id=options",children:"Pino options"}),":"]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Type"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"level"})}),(0,o.jsx)(n.td,{children:"string"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:'"info"'})}),(0,o.jsx)(n.td,{children:"Log level (trace, debug, info, warn, error, fatal, silent)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"formatters"})}),(0,o.jsx)(n.td,{children:"object"}),(0,o.jsx)(n.td,{children:"-"}),(0,o.jsx)(n.td,{children:"Custom formatters for log entries"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"transport"})}),(0,o.jsx)(n.td,{children:"object"}),(0,o.jsx)(n.td,{children:"-"}),(0,o.jsx)(n.td,{children:"Transport for pretty-printing (development)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"timestamp"})}),(0,o.jsx)(n.td,{children:"boolean | function"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsx)(n.td,{children:"Add timestamp to logs"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"redact"})}),(0,o.jsx)(n.td,{children:"array"}),(0,o.jsx)(n.td,{children:"-"}),(0,o.jsx)(n.td,{children:"Redact sensitive fields"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"pretty-printed-logs-development",children:"Pretty-Printed Logs (Development)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"defineLoggerConfig({\n  level: 'debug',\n  transport: {\n    target: 'pino-pretty',\n    options: {\n      colorize: true,\n      translateTime: 'HH:MM:ss Z',\n      ignore: 'pid,hostname',\n    },\n  },\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"json-logs-production",children:"JSON Logs (Production)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"defineLoggerConfig({\n  level: 'warn',\n  formatters: {\n    level: (label) => {\n      return { level: label };\n    },\n  },\n  timestamp: pino.stdTimeFunctions.isoTime,\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"environment-based-configuration",children:"Environment-Based Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"defineLoggerConfig({\n  level: process.env.LOG_LEVEL || 'info',\n  // Only use transport in development\n  ...(process.env.NODE_ENV === 'development' && {\n    transport: {\n      target: 'pino-pretty',\n      options: { colorize: true },\n    },\n  }),\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"scoped-loggers",children:"Scoped Loggers"}),"\n",(0,o.jsxs)(n.p,{children:["Create child loggers with additional context using ",(0,o.jsx)(n.code,{children:"logger.child()"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'import { logger } from \'balda\';\n\nconst serviceLogger = logger.child({ scope: \'UserService\' });\nserviceLogger.info(\'User created\', { userId: \'123\' });\n\n// Output: {"level":"info","time":...,"scope":"UserService","userId":"123","msg":"User created"}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"scoped-logger-pattern-in-classes",children:"Scoped Logger Pattern in Classes"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { logger } from 'balda';\n\nexport class UserService {\n  private readonly log = logger.child({ scope: 'UserService' });\n\n  async createUser(email: string) {\n    this.log.info('Creating user', { email });\n    // ...\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"service-logger-override",children:"Service Logger Override"}),"\n",(0,o.jsx)(n.admonition,{title:"Important",type:"caution",children:(0,o.jsxs)(n.p,{children:["Services like ",(0,o.jsx)(n.code,{children:"MqttService"}),", ",(0,o.jsx)(n.code,{children:"QueueService"}),", ",(0,o.jsx)(n.code,{children:"CronService"}),", and ",(0,o.jsx)(n.code,{children:"CommandRegistry"})," have independent static loggers created at class initialization. To configure these, you must call ",(0,o.jsx)(n.code,{children:"defineLoggerConfig()"})," ",(0,o.jsx)(n.strong,{children:"before"})," importing these services."]})}),"\n",(0,o.jsx)(n.h3,{id:"correct-order",children:"Correct Order"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// 1. Configure logger FIRST\nimport { defineLoggerConfig } from 'balda';\ndefineLoggerConfig({ level: 'debug' });\n\n// 2. Then import services\nimport { QueueService } from 'balda';\nimport { MqttService } from 'balda';\n\n// Now these services will use your configured logger\n"})}),"\n",(0,o.jsx)(n.h3,{id:"manual-service-logger-override",children:"Manual Service Logger Override"}),"\n",(0,o.jsx)(n.p,{children:"If you need to reconfigure a service's logger after initialization:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { logger } from 'balda';\nimport { QueueService } from 'balda';\n\n// Override the service's static logger\nQueueService.logger = logger.child({\n  scope: 'QueueService',\n  customContext: 'production',\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"log-levels",children:"Log Levels"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Level"}),(0,o.jsx)(n.th,{children:"Numeric Value"}),(0,o.jsx)(n.th,{children:"Use Case"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"trace"})}),(0,o.jsx)(n.td,{children:"10"}),(0,o.jsx)(n.td,{children:"Very detailed debugging (not recommended in production)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"debug"})}),(0,o.jsx)(n.td,{children:"20"}),(0,o.jsx)(n.td,{children:"Debugging information"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"info"})}),(0,o.jsx)(n.td,{children:"30"}),(0,o.jsx)(n.td,{children:"General informational messages"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"warn"})}),(0,o.jsx)(n.td,{children:"30"}),(0,o.jsx)(n.td,{children:"Warning messages"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"error"})}),(0,o.jsx)(n.td,{children:"40"}),(0,o.jsx)(n.td,{children:"Error messages"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"fatal"})}),(0,o.jsx)(n.td,{children:"60"}),(0,o.jsx)(n.td,{children:"Critical errors that require immediate attention"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"silent"})}),(0,o.jsx)(n.td,{children:"Infinity"}),(0,o.jsx)(n.td,{children:"Disable logging"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,o.jsx)(n.h3,{id:"defineloggerconfigoptions-logger",children:(0,o.jsx)(n.code,{children:"defineLoggerConfig(options?): Logger"})}),"\n",(0,o.jsx)(n.p,{children:"Configures the global logger instance."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { defineLoggerConfig } from 'balda';\n\ndefineLoggerConfig({\n  level?: string;           // Log level (default: \"info\")\n  formatters?: object;      // Custom formatters\n  transport?: object;       // Transport configuration\n  timestamp?: boolean;      // Enable/disable timestamp\n  // ... any Pino option\n});\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Returns:"})," The configured Pino logger instance."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Calling ",(0,o.jsx)(n.code,{children:"defineLoggerConfig()"})," multiple times will replace the previous logger configuration. Services with static loggers created before the last call will continue using their original logger unless manually overridden."]})}),"\n",(0,o.jsx)(n.h3,{id:"logger-1",children:(0,o.jsx)(n.code,{children:"logger"})}),"\n",(0,o.jsx)(n.p,{children:"The default logger instance."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { logger } from 'balda';\n\nlogger.info(message, ...args);\nlogger.error(message, ...args);\nlogger.warn(message, ...args);\nlogger.debug(message, ...args);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://getpino.io/",children:"Pino Documentation"})," - Full Pino API reference"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://github.com/pinojs/pino-pretty",children:"pino-pretty"})," - Pretty printing options"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"../getting-started/configuration",children:"Server Configuration"})," - Server-level configuration"]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var i=r(6540);const o={},s=i.createContext(o);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);