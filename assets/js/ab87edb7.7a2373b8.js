"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8863],{8449:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"plugins/static","title":"Static Plugin","description":"Serves static files from a specified directory. Automatically handles MIME type detection, file serving, and security.","source":"@site/docs/plugins/static.md","sourceDirName":"plugins","slug":"/plugins/static","permalink":"/balda/docs/plugins/static","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda/tree/main/docs/docs/plugins/static.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docs","previous":{"title":"Method Override","permalink":"/balda/docs/plugins/method-override"},"next":{"title":"Cookie Plugin","permalink":"/balda/docs/plugins/cookie"}}');var i=n(4848),r=n(8453);const c={sidebar_position:4},d="Static Plugin",l={},a=[{value:"Quick Start",id:"quick-start",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Examples",id:"examples",level:3},{value:"Usage",id:"usage",level:2},{value:"Directory Structure",id:"directory-structure",level:3},{value:"Separate Source and Path",id:"separate-source-and-path",level:3},{value:"MIME Type Detection",id:"mime-type-detection",level:2},{value:"Security",id:"security",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"File Not Found",id:"file-not-found",level:3},{value:"Directory Access",id:"directory-access",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Frontend Assets",id:"frontend-assets",level:3},{value:"User Uploads",id:"user-uploads",level:3},{value:"Build Output",id:"build-output",level:3},{value:"Multiple Static Directories",id:"multiple-static-directories",level:3},{value:"Performance Tips",id:"performance-tips",level:2}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"static-plugin",children:"Static Plugin"})}),"\n",(0,i.jsx)(s.p,{children:"Serves static files from a specified directory. Automatically handles MIME type detection, file serving, and security."}),"\n",(0,i.jsx)(s.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"import { Server } from 'balda';\n\nconst server = new Server({\n  plugins: {\n    static: {\n      source: 'public',   // File system directory\n      path: '/public'     // URL path\n    }\n  }\n});\n"})}),"\n",(0,i.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(s.p,{children:["Both ",(0,i.jsx)(s.code,{children:"source"})," and ",(0,i.jsx)(s.code,{children:"path"})," are ",(0,i.jsx)(s.strong,{children:"required"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"static: {\n  source: string,  // File system directory path\n  path: string     // URL path where files are served\n}\n"})}),"\n",(0,i.jsx)(s.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"// Serve from 'public' at '/public'\nstatic: {\n  source: 'public',\n  path: '/public'\n}\n\n// Serve from 'tmp/assets' at '/assets'\nstatic: {\n  source: 'tmp/assets',\n  path: '/assets'\n}\n\n// Serve uploads from storage\nstatic: {\n  source: 'storage/uploads',\n  path: '/uploads'\n}\n\n// Serve build output\nstatic: {\n  source: 'dist/client',\n  path: '/app'\n}\n"})}),"\n",(0,i.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(s.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"public/\n  \u251c\u2500\u2500 index.html\n  \u251c\u2500\u2500 css/\n  \u2502   \u2514\u2500\u2500 style.css\n  \u251c\u2500\u2500 js/\n  \u2502   \u2514\u2500\u2500 app.js\n  \u2514\u2500\u2500 images/\n      \u2514\u2500\u2500 logo.png\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"const server = new Server({\n  plugins: {\n    static: {\n      source: 'public',\n      path: '/public'\n    }\n  }\n});\n\n// Files available at:\n// http://localhost:3000/public/index.html\n// http://localhost:3000/public/css/style.css\n// http://localhost:3000/public/js/app.js\n// http://localhost:3000/public/images/logo.png\n"})}),"\n",(0,i.jsx)(s.h3,{id:"separate-source-and-path",children:"Separate Source and Path"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"static: {\n  source: 'tmp/assets',  // File system: ./tmp/assets/test.pdf\n  path: '/assets'        // URL: http://localhost:3000/assets/test.pdf\n}\n"})}),"\n",(0,i.jsx)(s.h2,{id:"mime-type-detection",children:"MIME Type Detection"}),"\n",(0,i.jsx)(s.p,{children:"Automatically detects content types for common file extensions:"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Extension"}),(0,i.jsx)(s.th,{children:"MIME Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".html"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"text/html"})}),(0,i.jsx)(s.td,{children:"HTML files"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".css"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"text/css"})}),(0,i.jsx)(s.td,{children:"CSS stylesheets"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".js"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"application/javascript"})}),(0,i.jsx)(s.td,{children:"JavaScript files"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".png"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"image/png"})}),(0,i.jsx)(s.td,{children:"PNG images"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:".jpg"}),", ",(0,i.jsx)(s.code,{children:".jpeg"})]}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"image/jpeg"})}),(0,i.jsx)(s.td,{children:"JPEG images"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".gif"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"image/gif"})}),(0,i.jsx)(s.td,{children:"GIF images"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".svg"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"image/svg+xml"})}),(0,i.jsx)(s.td,{children:"SVG images"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".json"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"application/json"})}),(0,i.jsx)(s.td,{children:"JSON files"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".txt"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"text/plain"})}),(0,i.jsx)(s.td,{children:"Text files"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".pdf"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"application/pdf"})}),(0,i.jsx)(s.td,{children:"PDF files"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".mp4"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"video/mp4"})}),(0,i.jsx)(s.td,{children:"MP4 videos"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:".webp"})}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"image/webp"})}),(0,i.jsx)(s.td,{children:"WebP images"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:".woff"}),", ",(0,i.jsx)(s.code,{children:".woff2"})]}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"font/woff"}),", ",(0,i.jsx)(s.code,{children:"font/woff2"})]}),(0,i.jsx)(s.td,{children:"Font files"})]})]})]}),"\n",(0,i.jsx)(s.p,{children:"And many more common file types..."}),"\n",(0,i.jsx)(s.h2,{id:"security",children:"Security"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Only serves files from the specified ",(0,i.jsx)(s.code,{children:"source"})," directory"]}),"\n",(0,i.jsx)(s.li,{children:"Prevents directory traversal attacks"}),"\n",(0,i.jsx)(s.li,{children:"Returns 404 for files outside source directory"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(s.h3,{id:"file-not-found",children:"File Not Found"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// Request: GET /public/nonexistent.jpg\n// Response: 404 Not Found\n{\n  "error": "File not found"\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"directory-access",children:"Directory Access"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// Request: GET /public/../../../etc/passwd\n// Response: 404 Not Found\n{\n  "error": "File not found"\n}\n'})}),"\n",(0,i.jsx)(s.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(s.h3,{id:"frontend-assets",children:"Frontend Assets"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"static: {\n  source: 'public',\n  path: '/assets'\n}\n"})}),"\n",(0,i.jsx)(s.h3,{id:"user-uploads",children:"User Uploads"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"static: {\n  source: 'storage/uploads',\n  path: '/uploads'\n}\n"})}),"\n",(0,i.jsx)(s.h3,{id:"build-output",children:"Build Output"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"static: {\n  source: 'dist/client',\n  path: '/app'\n}\n"})}),"\n",(0,i.jsx)(s.h3,{id:"multiple-static-directories",children:"Multiple Static Directories"}),"\n",(0,i.jsx)(s.p,{children:"Use multiple server instances or mount paths:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"const server = new Server({\n  plugins: {\n    static: {\n      source: 'public',\n      path: '/public'\n    }\n  }\n});\n\n// For uploads, create a separate configuration or use dynamic routes\n"})}),"\n",(0,i.jsx)(s.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Serve static files through a CDN in production"}),"\n",(0,i.jsx)(s.li,{children:"Use a reverse proxy (nginx, Caddy) for better performance"}),"\n",(0,i.jsx)(s.li,{children:"Enable caching headers for static assets"}),"\n",(0,i.jsx)(s.li,{children:"Consider using object storage (S3) for user uploads"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>d});var t=n(6540);const i={},r=t.createContext(i);function c(e){const s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);