"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3052],{3926:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"plugins/helmet","title":"Helmet Plugin","description":"Sets various HTTP security headers to help protect your application from well-known web vulnerabilities.","source":"@site/docs/plugins/helmet.md","sourceDirName":"plugins","slug":"/plugins/helmet","permalink":"/balda-js/docs/plugins/helmet","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda-js/tree/main/docs/docs/plugins/helmet.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docs","previous":{"title":"CORS Plugin","permalink":"/balda-js/docs/plugins/cors"},"next":{"title":"Rate Limiter Plugin","permalink":"/balda-js/docs/plugins/rate-limiter"}}');var t=r(4848),s=r(8453);const l={sidebar_position:6},c="Helmet Plugin",o={},d=[{value:"Quick Start",id:"quick-start",level:2},{value:"Default Configuration",id:"default-configuration",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Content Security Policy (CSP)",id:"content-security-policy-csp",level:3},{value:"HTTP Strict Transport Security (HSTS)",id:"http-strict-transport-security-hsts",level:3},{value:"Frame Options",id:"frame-options",level:3},{value:"Referrer Policy",id:"referrer-policy",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Security Headers Explained",id:"security-headers-explained",level:2},{value:"Environment-Based Configuration",id:"environment-based-configuration",level:2},{value:"Disabling Helmet",id:"disabling-helmet",level:2},{value:"Common Configurations",id:"common-configurations",level:2},{value:"API Server",id:"api-server",level:3},{value:"Web Application with CDN",id:"web-application-with-cdn",level:3},{value:"Development Mode",id:"development-mode",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"CSP Blocking Resources",id:"csp-blocking-resources",level:3},{value:"Development vs Production",id:"development-vs-production",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"helmet-plugin",children:"Helmet Plugin"})}),"\n",(0,t.jsx)(n.p,{children:"Sets various HTTP security headers to help protect your application from well-known web vulnerabilities."}),"\n",(0,t.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Server } from 'balda-js';\n\nconst server = new Server({\n  plugins: {\n    helmet: {}  // Enable with defaults\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"default-configuration",children:"Default Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'helmet: {\n  dnsPrefetchControl: true,\n  frameguard: { action: "SAMEORIGIN" },\n  hsts: { maxAge: 15552000, includeSubDomains: true, preload: false },\n  contentTypeOptions: true,\n  ieNoOpen: true,\n  xssFilter: true,\n  referrerPolicy: "no-referrer",\n  crossOriginResourcePolicy: "same-origin",\n  crossOriginOpenerPolicy: "same-origin",\n  crossOriginEmbedderPolicy: "require-corp",\n  contentSecurityPolicy: false  // Disabled by default\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"content-security-policy-csp",children:"Content Security Policy (CSP)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'helmet: {\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: ["\'self\'"],\n      styleSrc: ["\'self\'", "\'unsafe-inline\'", "https://fonts.googleapis.com"],\n      scriptSrc: ["\'self\'", "https://cdn.jsdelivr.net"],\n      imgSrc: ["\'self\'", "data:", "https:"],\n      fontSrc: ["\'self\'", "https://fonts.gstatic.com"],\n      connectSrc: ["\'self\'", "https://api.example.com"],\n      frameSrc: ["\'none\'"],\n      objectSrc: ["\'none\'"]\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"http-strict-transport-security-hsts",children:"HTTP Strict Transport Security (HSTS)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"helmet: {\n  hsts: {\n    maxAge: 31536000,        // 1 year in seconds\n    includeSubDomains: true, // Apply to subdomains\n    preload: true            // Include in browser preload lists\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"frame-options",children:"Frame Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'helmet: {\n  frameguard: { action: "DENY" }  // Prevent embedding in frames\n}\n\n// Or\nhelmet: {\n  frameguard: { action: "SAMEORIGIN" }  // Allow same-origin framing\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"referrer-policy",children:"Referrer Policy"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'helmet: {\n  referrerPolicy: "no-referrer"  // Don\'t send referrer\n}\n\n// Or\nhelmet: {\n  referrerPolicy: "strict-origin-when-cross-origin"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'const server = new Server({\n  plugins: {\n    helmet: {\n      contentSecurityPolicy: {\n        directives: {\n          defaultSrc: ["\'self\'"],\n          styleSrc: ["\'self\'", "\'unsafe-inline\'"],\n          scriptSrc: ["\'self\'"],\n          imgSrc: ["\'self\'", "data:", "https:"]\n        }\n      },\n      hsts: {\n        maxAge: 31536000,\n        includeSubDomains: true,\n        preload: true\n      },\n      frameguard: { action: "DENY" },\n      contentTypeOptions: true,\n      xssFilter: true,\n      referrerPolicy: "no-referrer"\n    }\n  }\n});\n'})}),"\n",(0,t.jsx)(n.h2,{id:"security-headers-explained",children:"Security Headers Explained"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Header"}),(0,t.jsx)(n.th,{children:"Purpose"}),(0,t.jsx)(n.th,{children:"Default"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Content-Security-Policy"}),(0,t.jsx)(n.td,{children:"Prevent XSS and injection attacks"}),(0,t.jsx)(n.td,{children:"Disabled"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Strict-Transport-Security"}),(0,t.jsx)(n.td,{children:"Force HTTPS"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"max-age=15552000"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"X-Frame-Options"}),(0,t.jsx)(n.td,{children:"Prevent clickjacking"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SAMEORIGIN"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"X-Content-Type-Options"}),(0,t.jsx)(n.td,{children:"Prevent MIME sniffing"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"nosniff"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"X-XSS-Protection"}),(0,t.jsx)(n.td,{children:"Enable XSS filter"}),(0,t.jsx)(n.td,{children:"Enabled"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Referrer-Policy"}),(0,t.jsx)(n.td,{children:"Control referrer information"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"no-referrer"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Cross-Origin-Resource-Policy"}),(0,t.jsx)(n.td,{children:"Control resource sharing"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"same-origin"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"environment-based-configuration",children:"Environment-Based Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const isProduction = process.env.NODE_ENV === 'production';\n\nconst server = new Server({\n  plugins: {\n    helmet: isProduction ? {\n      contentSecurityPolicy: {\n        directives: {\n          defaultSrc: [\"'self'\"],\n          styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n          scriptSrc: [\"'self'\"]\n        }\n      },\n      hsts: {\n        maxAge: 31536000,\n        includeSubDomains: true,\n        preload: true\n      }\n    } : {}\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"disabling-helmet",children:"Disabling Helmet"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  plugins: {\n    helmet: false\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-configurations",children:"Common Configurations"}),"\n",(0,t.jsx)(n.h3,{id:"api-server",children:"API Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'helmet: {\n  contentSecurityPolicy: false,  // Not needed for API-only\n  hsts: { maxAge: 31536000, includeSubDomains: true },\n  frameguard: { action: "DENY" },\n  referrerPolicy: "no-referrer"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"web-application-with-cdn",children:"Web Application with CDN"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'helmet: {\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: ["\'self\'"],\n      styleSrc: ["\'self\'", "https://cdn.myapp.com"],\n      scriptSrc: ["\'self\'", "https://cdn.myapp.com"],\n      imgSrc: ["\'self\'", "https://cdn.myapp.com", "data:"],\n      fontSrc: ["\'self\'", "https://cdn.myapp.com"]\n    }\n  },\n  hsts: { maxAge: 31536000, includeSubDomains: true, preload: true }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"development-mode",children:"Development Mode"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"helmet: {\n  contentSecurityPolicy: false,  // Disable CSP in development\n  hsts: false                    // Disable HSTS in development\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Enable HSTS in production"})," - Force HTTPS connections"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configure CSP carefully"})," - Test thoroughly before deploying"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use frameguard"})," - Prevent clickjacking attacks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Set referrer policy"})," - Control information leakage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keep headers up to date"})," - Security best practices evolve"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"csp-blocking-resources",children:"CSP Blocking Resources"}),"\n",(0,t.jsx)(n.p,{children:"If Content-Security-Policy blocks legitimate resources:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'helmet: {\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: ["\'self\'"],\n      scriptSrc: ["\'self\'", "https://trusted-cdn.com"],  // Add trusted sources\n      styleSrc: ["\'self\'", "\'unsafe-inline\'"]  // Allow inline styles if needed\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"development-vs-production",children:"Development vs Production"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const isDev = process.env.NODE_ENV !== 'production';\n\nhelmet: {\n  contentSecurityPolicy: isDev ? false : { /* production CSP */ },\n  hsts: isDev ? false : { maxAge: 31536000 }\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var i=r(6540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);