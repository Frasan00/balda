"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2632],{7135:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"core-concepts/server","title":"Server","description":"The Server class is the main entry point for creating Balda applications. It handles HTTP requests, manages middleware, and orchestrates the entire application lifecycle.","source":"@site/docs/core-concepts/server.md","sourceDirName":"core-concepts","slug":"/core-concepts/server","permalink":"/balda/docs/core-concepts/server","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/balda/tree/main/docs/docs/core-concepts/server.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"custom","permalink":"/balda/docs/commands/custom"},"next":{"title":"Controllers","permalink":"/balda/docs/core-concepts/controllers"}}');var t=r(4848),o=r(8453);const i={sidebar_position:1},l="Server",d={},a=[{value:"Creating a Server",id:"creating-a-server",level:2},{value:"Server Lifecycle",id:"server-lifecycle",level:2},{value:"1. Initialization",id:"1-initialization",level:3},{value:"2. Route Registration",id:"2-route-registration",level:3},{value:"3. Server Startup",id:"3-server-startup",level:3},{value:"Server Configuration",id:"server-configuration",level:2},{value:"Basic Options",id:"basic-options",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:3},{value:"Server Methods",id:"server-methods",level:2},{value:"HTTP Methods",id:"http-methods",level:3},{value:"Middleware Management",id:"middleware-management",level:3},{value:"Path Normalization and Groups",id:"path-normalization-and-groups",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Custom Not Found Handler",id:"custom-not-found-handler",level:3},{value:"Server Properties",id:"server-properties",level:2},{value:"Read-only Properties",id:"read-only-properties",level:3},{value:"Utility Methods",id:"utility-methods",level:3},{value:"Event Handling",id:"event-handling",level:2},{value:"Server Shutdown",id:"server-shutdown",level:2},{value:"Runtime Support",id:"runtime-support",level:2},{value:"Node.js",id:"nodejs",level:3},{value:"Bun",id:"bun",level:3},{value:"Deno",id:"deno",level:3},{value:"Node.js HTTP Client Options",id:"nodejs-http-client-options",level:2},{value:"Available Options",id:"available-options",level:3},{value:"HTTPS Configuration",id:"https-configuration",level:3},{value:"HTTP/2 Secure Configuration",id:"http2-secure-configuration",level:3},{value:"TLS Options",id:"tls-options",level:3},{value:"Complete Example",id:"complete-example",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"server",children:"Server"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Server"})," class is the main entry point for creating Balda applications. It handles HTTP requests, manages middleware, and orchestrates the entire application lifecycle."]}),"\n",(0,t.jsx)(n.h2,{id:"creating-a-server",children:"Creating a Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Server } from 'balda';\n\nconst server = new Server({\n  port: 3000,\n  host: 'localhost'\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"server-lifecycle",children:"Server Lifecycle"}),"\n",(0,t.jsx)(n.h3,{id:"1-initialization",children:"1. Initialization"}),"\n",(0,t.jsx)(n.p,{children:"When you create a server instance, it:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Sets up the runtime connector (Node.js, Bun, or Deno)"}),"\n",(0,t.jsx)(n.li,{children:"Initializes the router"}),"\n",(0,t.jsx)(n.li,{children:"Applies global middleware"}),"\n",(0,t.jsx)(n.li,{children:"Sets up the body parser"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  port: 3000,\n  plugins: {\n    cors: { origin: '*' },\n    json: { sizeLimit: '1mb' }\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-route-registration",children:"2. Route Registration"}),"\n",(0,t.jsx)(n.p,{children:"Routes can be registered in two ways:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Direct registration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"server.get('/users', (req, res) => {\n  res.json({ users: [] });\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Controller-based registration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"@controller('/users')\nexport class UsersController {\n  @get('/')\n  async getUsers(req, res) {\n    res.json({ users: [] });\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Using the global router:"})}),"\n",(0,t.jsxs)(n.p,{children:["For library-level or modular route definitions, you can import the shared ",(0,t.jsx)(n.code,{children:"router"})," and register routes without a ",(0,t.jsx)(n.code,{children:"Server"})," instance. These routes will be consumed by the server at startup."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { router } from 'balda';\n\nrouter.get('/health', (req, res) => {\n  res.json({ status: 'ok' });\n});\n\nrouter.post('/login', authMiddleware, (req, res) => {\n  res.json({ token: '...' });\n});\n\nrouter.get('/admin', [authMiddleware, adminMiddleware], (req, res) => {\n  res.json({ ok: true });\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-server-startup",children:"3. Server Startup"}),"\n",(0,t.jsxs)(n.p,{children:["When you call ",(0,t.jsx)(n.code,{children:"server.listen()"}),", the server:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Imports controllers based on patterns"}),"\n",(0,t.jsx)(n.li,{children:"Registers all routes"}),"\n",(0,t.jsx)(n.li,{children:"Applies plugins"}),"\n",(0,t.jsx)(n.li,{children:"Starts listening for requests"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"server.listen(({ port, host }) => {\n  console.log(`Server running on http://${host}:${port}`);\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"server-configuration",children:"Server Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"basic-options",children:"Basic Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import path from 'path';\n\nconst server = new Server({\n  port: 3000,                    // Server port\n  host: 'localhost',             // Server host\n  controllerPatterns: [          // Controller file patterns, we use the import.meta.dirname to get the directory of the current file since it should work on both in a build and dev environment\n    path.join(import.meta.dirname, 'controllers/**/*.ts')\n  ],\n  plugins: {},                   // Plugin configuration\n  swagger: true,                 // Enable Swagger docs\n  tapOptions: {}                 // Runtime-specific options\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import path from 'path';\n\nconst server = new Server({\n  port: process.env.PORT || 3000,\n  host: process.env.HOST || '0.0.0.0',\n  controllerPatterns: [\n    path.join(import.meta.dirname, 'controllers/**/*.ts'),\n    path.join(import.meta.dirname, 'api/**/*.ts')\n  ],\n  plugins: {\n    cors: { origin: '*' },\n    json: { sizeLimit: '10mb' },\n    static: { source: './public', path: '/public' }\n  },\n  swagger: {\n    type: 'standard',\n    models: {\n      User: {\n        type: 'object',\n        properties: {\n          id: { type: 'number' },\n          name: { type: 'string' }\n        }\n      }\n    }\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"server-methods",children:"Server Methods"}),"\n",(0,t.jsx)(n.h3,{id:"http-methods",children:"HTTP Methods"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// GET requests\n// Handler-only\nserver.get('/users', (req, res) => {\n  res.json({ users: [] });\n});\n\n// POST requests\n// With single middleware\nserver.post('/users', authMiddleware, (req, res) => {\n  res.created({ id: 1, name: 'John' });\n});\n\n// PUT requests\n// With multiple middleware\nserver.put('/users/:id', [authMiddleware, auditMiddleware], (req, res) => {\n  res.json({ id: req.params.id, name: 'Updated' });\n});\n\n// PATCH requests\nserver.patch('/users/:id', (req, res) => {\n  res.json({ id: req.params.id, ...req.body });\n});\n\n// DELETE requests\nserver.delete('/users/:id', (req, res) => {\n  res.noContent();\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"middleware-management",children:"Middleware Management"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Add global middleware\nserver.use((req, res, next) => {\n  console.log(`${req.method} ${req.url}`);\n  next();\n});\n\n// Add multiple middleware\nserver.use(\n  (req, res, next) => {\n    req.startTime = Date.now();\n    next();\n  },\n  (req, res, next) => {\n    res.on('finish', () => {\n      const duration = Date.now() - req.startTime;\n      console.log(`${req.method} ${req.url} - ${duration}ms`);\n    });\n    next();\n  }\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"path-normalization-and-groups",children:"Path Normalization and Groups"}),"\n",(0,t.jsx)(n.p,{children:"Paths are normalized to avoid duplicate or trailing slashes. Grouping allows composing a base path and shared middleware:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"server.group('/api', (r) => {\n  r.get('/status', (req, res) => res.json({ ok: true })); // => /api/status\n});\n\nserver.group('/v1', authMiddleware, (r) => {\n  r.get('/me', (req, res) => res.json({ me: '...' })); // => /v1/me with auth\n});\n\nserver.group('/admin', [authMiddleware, adminMiddleware], (r) => {\n  r.get('/dashboard', (req, res) => res.json({ ok: true })); // => /admin/dashboard with both\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Both the server instance and the global ",(0,t.jsx)(n.code,{children:"router"})," support the same overloads:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["handler-only: ",(0,t.jsx)(n.code,{children:"get(path, handler, swagger?)"})]}),"\n",(0,t.jsxs)(n.li,{children:["single middleware: ",(0,t.jsx)(n.code,{children:"get(path, middleware, handler, swagger?)"})]}),"\n",(0,t.jsxs)(n.li,{children:["multiple middleware: ",(0,t.jsx)(n.code,{children:"get(path, [mw1, mw2], handler, swagger?)"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"server.setErrorHandler((req, res, next, error) => {\n  console.error('Error:', error);\n\n  if (error.name === 'ValidationError') {\n    return res.badRequest({ error: error.message });\n  }\n\n  res.internalServerError({ error: 'Internal server error' });\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"custom-not-found-handler",children:"Custom Not Found Handler"}),"\n",(0,t.jsxs)(n.p,{children:["By default, Balda returns a standardized 404 error response when a route is not found. You can customize this behavior using ",(0,t.jsx)(n.code,{children:"setNotFoundHandler"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"server.setNotFoundHandler((req, res) => {\n  res.status(404).json({\n    error: 'Not Found',\n    message: `The route ${req.url} does not exist`,\n    timestamp: new Date().toISOString()\n  });\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advanced Examples:"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HTML Response for Web Applications:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"server.setNotFoundHandler((req, res) => {\n  res.status(404).html(`\n    <!DOCTYPE html>\n    <html>\n      <head><title>404 - Page Not Found</title></head>\n      <body>\n        <h1>Oops! Page not found</h1>\n        <p>The page you're looking for doesn't exist.</p>\n        <a href=\"/\">Go back home</a>\n      </body>\n    </html>\n  `);\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Resetting to Default Behavior:"})}),"\n",(0,t.jsxs)(n.p,{children:["To reset to the default not found handler, pass ",(0,t.jsx)(n.code,{children:"undefined"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"server.setNotFoundHandler(undefined);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"server-properties",children:"Server Properties"}),"\n",(0,t.jsx)(n.h3,{id:"read-only-properties",children:"Read-only Properties"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Get server URL\nconsole.log(server.url); // http://localhost:3000\n\n// Get server port\nconsole.log(server.port); // 3000\n\n// Get server host\nconsole.log(server.host); // localhost\n\n// Check if server is listening\nconsole.log(server.isListening); // true/false\n"})}),"\n",(0,t.jsx)(n.h3,{id:"utility-methods",children:"Utility Methods"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import type { NodeHttpClient } from \"balda\";\n\ndeclare module \"balda\" {\n  interface Server {\n    db: typeof db;\n  }\n}\n\n// Get temporary directory\nconst tmpDir = server.tmpDir('uploads', 'images');\n\n// Embed data for later use\nserver.embed('config', { apiKey: 'secret' });\n\n// Get embedded data\nconst config = server.embed('config');\n\n// Exit the server\nserver.exit(0);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"event-handling",children:"Event Handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Handle graceful shutdown\nserver.on('SIGTERM', () => {\n  console.log('Received SIGTERM, shutting down gracefully');\n  server.close();\n});\n\nserver.on('SIGINT', () => {\n  console.log('Received SIGINT, shutting down gracefully');\n  server.close();\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"server-shutdown",children:"Server Shutdown"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Graceful shutdown\nasync function shutdown() {\n  console.log('Shutting down server...');\n  await server.close();\n  console.log('Server shut down successfully');\n  process.exit(0);\n}\n\n// Handle shutdown signals\nprocess.on('SIGTERM', shutdown);\nprocess.on('SIGINT', shutdown);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"runtime-support",children:"Runtime Support"}),"\n",(0,t.jsx)(n.p,{children:"Balda automatically detects and adapts to your runtime:"}),"\n",(0,t.jsx)(n.h3,{id:"nodejs",children:"Node.js"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Uses Node.js http module\nconst server = new Server({\n  port: 3000\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"bun",children:"Bun"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Uses Bun's HTTP server\nconst server = new Server({\n  port: 3000\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"deno",children:"Deno"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Uses Deno's HTTP server\nconst server = new Server({\n  port: 3000\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"nodejs-http-client-options",children:"Node.js HTTP Client Options"}),"\n",(0,t.jsxs)(n.p,{children:["When running on Node.js, you can specify which HTTP module to use via the ",(0,t.jsx)(n.code,{children:"nodeHttpClient"})," option:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  port: 3000,\n  nodeHttpClient: 'http'  // 'http' | 'http2' | 'https' | 'http2-secure'\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"available-options",children:"Available Options"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'http'"})}),(0,t.jsx)(n.td,{children:"Standard HTTP/1.1 server (default)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'http2'"})}),(0,t.jsx)(n.td,{children:"HTTP/2 server without TLS (cleartext, h2c)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'https'"})}),(0,t.jsx)(n.td,{children:"HTTPS server with TLS encryption (HTTP/1.1 over TLS)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"'http2-secure'"})}),(0,t.jsx)(n.td,{children:"HTTP/2 server with TLS encryption (recommended for production HTTP/2)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"https-configuration",children:"HTTPS Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["When using ",(0,t.jsx)(n.code,{children:"nodeHttpClient: 'https'"}),", you ",(0,t.jsx)(n.strong,{children:"must"})," provide the ",(0,t.jsx)(n.code,{children:"httpsOptions"})," with your TLS certificate and key:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import fs from 'fs';\n\nconst server = new Server({\n  port: 443,\n  nodeHttpClient: 'https',\n  httpsOptions: {\n    key: fs.readFileSync('./certs/private-key.pem'),\n    cert: fs.readFileSync('./certs/certificate.pem'),\n  }\n});\n\nserver.listen(({ url }) => {\n  console.log(`\ud83d\udd12 Secure server running at ${url}`);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"http2-secure-configuration",children:"HTTP/2 Secure Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["For HTTP/2 with TLS (the standard way browsers connect via HTTP/2), use ",(0,t.jsx)(n.code,{children:"nodeHttpClient: 'http2-secure'"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import fs from 'fs';\n\nconst server = new Server({\n  port: 443,\n  nodeHttpClient: 'http2-secure',\n  httpsOptions: {\n    key: fs.readFileSync('./certs/private-key.pem'),\n    cert: fs.readFileSync('./certs/certificate.pem'),\n  }\n});\n\nserver.listen(({ url }) => {\n  console.log(`\ud83d\ude80 HTTP/2 secure server running at ${url}`);\n});\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["Most browsers only support HTTP/2 over TLS, so ",(0,t.jsx)(n.code,{children:"'http2-secure'"})," is the recommended option for production HTTP/2 servers. The ",(0,t.jsx)(n.code,{children:"'http2'"})," option (cleartext h2c) is primarily useful for internal services or testing."]})}),"\n",(0,t.jsx)(n.h3,{id:"tls-options",children:"TLS Options"}),"\n",(0,t.jsxs)(n.p,{children:["Both ",(0,t.jsx)(n.code,{children:"'https'"})," and ",(0,t.jsx)(n.code,{children:"'http2-secure'"})," require ",(0,t.jsx)(n.code,{children:"httpsOptions"}),". You can pass any valid ",(0,t.jsx)(n.a,{href:"https://nodejs.org/api/tls.html#tlscreateserveroptions-secureconnectionlistener",children:"Node.js TLS options"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const server = new Server({\n  port: 443,\n  nodeHttpClient: 'http2-secure',\n  httpsOptions: {\n    key: fs.readFileSync('./certs/private-key.pem'),\n    cert: fs.readFileSync('./certs/certificate.pem'),\n    ca: fs.readFileSync('./certs/ca-certificate.pem'),  // Certificate Authority\n    passphrase: 'your-passphrase',                      // If key is encrypted\n    minVersion: 'TLSv1.2',                              // Minimum TLS version\n  }\n});\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["For local development, you can generate self-signed certificates using tools like ",(0,t.jsx)(n.a,{href:"https://github.com/FiloSottile/mkcert",children:"mkcert"}),"."]})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"httpsOptions"})," property is ",(0,t.jsx)(n.strong,{children:"only available"})," when ",(0,t.jsx)(n.code,{children:"nodeHttpClient"})," is set to ",(0,t.jsx)(n.code,{children:"'https'"})," or ",(0,t.jsx)(n.code,{children:"'http2-secure'"}),". TypeScript will enforce this at compile time."]})}),"\n",(0,t.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Server } from 'balda';\n\nconst server = new Server({\n  port: 3000,\n  host: 'localhost',\n  controllerPatterns: ['./src/controllers/**/*.ts'],\n  plugins: {\n    cors: { origin: '*' },\n    json: { sizeLimit: '10mb' },\n    log: { logRequest: true }\n  }\n});\n\n// Global middleware\nserver.use((req, res, next) => {\n  req.startTime = Date.now();\n  next();\n});\n\n// Error handler\nserver.setErrorHandler((req, res, next, error) => {\n  console.error('Error:', error);\n  res.internalServerError({ error: 'Something went wrong' });\n});\n\n// Custom not found handler\nserver.setNotFoundHandler((req, res) => {\n  console.warn(`404 Not Found: ${req.method} ${req.url}`);\n  res.status(404).json({\n    error: 'Not Found',\n    message: `Route ${req.url} does not exist`,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// Direct route registration\nserver.get('/health', (req, res) => {\n  res.json({ status: 'ok', uptime: process.uptime() });\n});\n\n// Start server\nserver.listen(({ port, host }) => {\n  console.log(`\ud83d\ude80 Server running on http://${host}:${port}`);\n  console.log(`\ud83d\udcda API Documentation: http://${host}:${port}/docs`);\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => server.close());\nprocess.on('SIGINT', () => server.close());\n"})}),"\n",(0,t.jsx)(n.p,{children:"The Server class provides a solid foundation for building scalable web applications with Balda."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var s=r(6540);const t={},o=s.createContext(t);function i(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);